webpackJsonp([45],{rPup:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),o=a.n(s),c=a("Ylnc"),i=a("SQ1s"),r=a("tdg1"),l={name:"classList",components:{Header:c.a,backHeader:i.a,noGood:r.a},data:function(){return{activeTest:["1"],activeNames:["1"],content:[],isActive:0,courseList:[],pageSize:10,pageNum:1,classCount:0,courseType:"",status:0,classLoading:!0,chapterItem:null,scopeList:[{cKey:"BAND",cValue:657}],subList:[{subNum:10,subType:"1"}],courseId:null}},created:function(){this.getCateList()},mounted:function(){this.queryCourseList()},activated:function(){if(this.getCateList(),localStorage.loadClassFlag&&"true"==localStorage.loadClassFlag&&(this.isActive=0,this.courseType="",this.pageNum=1,this.courseList=[],this.queryCourseList(),localStorage.removeItem("loadClassFlag")),localStorage.learnStratTime){var t=Number(localStorage.learnStratTime),e=(new Date).getTime()-t,a=parseInt(e/1e3);console.log("课程学习时长：",e,e/1e3,parseInt(e/1e3)),localStorage.removeItem("learnStratTime"),this.saveLearnDuration(a)}},watch:{$route:function(t,e){}},filters:{formatType:function(t){return t.join("/")}},methods:{back:function(){this.$router.push({path:"/index"})},runking:function(t){this.$router.push({path:"/runking",query:{item:t}})},toClassRecord:function(t){localStorage.checkRecordFlag="true",localStorage.dateName=t.courseName,localStorage.courseId=t.id,localStorage.topicCount=t.topicCount,localStorage.classInfo=o()(t),this.$router.push({path:"/checkRecord",query:{item:t}})},toCheck:function(t){localStorage.dateName=t.courseName,localStorage.courseId=t.id,localStorage.toTestPath="classList",t.topicCount>=10?this.$router.push({path:"/taskTest",query:{courseInfo:t}}):this.$toast("测试题目未准备完毕，不能自测")},changeAdd:function(t,e){this.courseType!=t&&(this.isActive!=e&&(this.isActive<e?this.$refs.classTitScroll.scrollToElement(event.currentTarget,500):event.currentTarget.previousElementSibling?this.$refs.classTitScroll.scrollToElement(event.currentTarget.previousElementSibling,500):this.$refs.classTitScroll.scrollToElement(event.currentTarget,500)),this.isActive=e,this.courseType="全部"==t?"":t,this.pageNum=1,this.classLoading=!0,this.queryCourseList())},toClassDetail:function(t,e){console.log("课程单元的item:",t),localStorage.curCountStudyTime=t.courseDuration,this.courseId=e,this.chapterItem=t,localStorage.learnStratTime=(new Date).getTime(),localStorage.curChapterId=t.id,this.$router.push({path:"/classDetailPage",query:{item:t,courseId:e}})},queryCourseList:function(){var t=this,e={userId:localStorage.userId,courseType:t.courseType,status:t.status,pageNum:t.pageNum,pageSize:t.pageSize,brandId:localStorage.brandId},a=this.GLOBAL.g_paramJson(e);t.$axios.post("/work/CourseInfo/getAppQueryCourse",a).then(function(e){t.classLoading=!1,"0"==e.data.head.status?(t.classCount=e.data.body.count,1==t.pageNum?t.courseList=e.data.body.resultList:t.courseList=t.courseList.concat(e.data.body.resultList)):t.$toast(e.data.head.msg)}).catch(function(t){console.log(t)})},circleRefresh:function(){this.pageNum=1,this.queryCourseList()},cyclicLoading:function(){this.courseList.length<this.classCount?(this.pageNum++,this.queryCourseList()):this.$refs.moduleScroll.update(!0)},getCateList:function(){var t=this,e={userId:localStorage.userId,brandId:localStorage.brandId,type:"CURRICULUM"},a=t.GLOBAL.g_paramJson(e,100009);t.$axios.post("/goods/dictitemInfo/dictitemInfoAllMethod",a).then(function(e){if(0==e.data.head.status){t.content=e.data.body.result;t.content.unshift({dicttimeDisplayName:"全部"})}else t.$toast(e.data.head.msg)}).catch(function(t){console.log(t)})},saveLearnDuration:function(t){var e=this,a={userId:localStorage.userId,chapterId:localStorage.curChapterId,chapterDuration:t,courseId:this.courseId},s=e.GLOBAL.g_paramJson(a);e.$axios.post("work/chapterUser/updateChapterDuration",s).then(function(a){if(0==a.data.head.status){localStorage.removeItem("curChapterId");var s="",o=t+Number(localStorage.curCountStudyTime);console.log("该单元总的学习秒数：====",t,o),o>=86400?s="约"+Math.round(o/3600/24)+"天":o>=3600?s="约"+Math.round(o/3600)+"小时":o>=60?s="约"+Math.round(o/60)+"分钟":o>0&&(s="约"+o+"秒"),e.chapterItem.studyDuration=s}else e.$toast(a.data.head.msg)}).catch(function(t){console.log(t)})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"classList"}},[a("div",{staticClass:"headBox"},[a("backHeader",{staticStyle:{"background-color":"#f5f5f5"},attrs:{title:"微课堂"}},[a("span",{staticClass:"head-class f-l",attrs:{slot:"left"},on:{click:t.back},slot:"left"},[t._t("default",[a("img",{staticClass:"back-icon",attrs:{src:"static/images/dev/back@2x.png",alt:""}})])],2),t._v(" "),a("span",{staticClass:"head-class place-label",attrs:{slot:"right"},slot:"right"})])],1),t._v(" "),a("Scroll",{ref:"classTitScroll",staticClass:"box",attrs:{probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!0,pullDown:!1,pullUp:!1}},[a("ul",{staticClass:"box-list"},t._l(t.content,function(e,s){return a("li",{key:s,class:{active:t.isActive===s},on:{click:function(a){t.changeAdd(e.dicttimeDisplayName,s)}}},[t._v(t._s(e.dicttimeDisplayName)+"\n      ")])}))]),t._v(" "),1==t.classLoading?a("div",{staticClass:"coll-loading-box"},[a("van-loading",{attrs:{color:"#00a2ea"}})],1):a("Scroll",{ref:"moduleScroll",staticClass:"home",attrs:{"update-data":[t.courseList],listenScroll:!0,probeType:3,scrollX:!1,scrollY:!0,autoUpdate:!1},on:{pullingDown:t.circleRefresh,pullingUp:t.cyclicLoading}},[t.courseList.length>0?a("div",{staticClass:"scroll"},[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.courseList,function(e,s){return a("div",{key:s,staticClass:"courseList"},[a("van-collapse-item",{attrs:{value:t._f("formatType")(e.courseType),name:s}},[a("template",{slot:"title"},[a("span",{staticClass:"odiv"}),t._v(" "),a("span",{staticClass:"courseTit"},[t._v(t._s(e.courseName))])]),t._v(" "),t._l(e.chapterList,function(s,o){return a("div",{key:o,staticClass:"courseItem",on:{click:function(a){t.toClassDetail(s,e.id)}}},[a("span",[t._v("PART"+t._s(o+1)+"："+t._s(s.chapterName))]),t._v(" "),a("span",[t._v(t._s(s.studyDuration))])])})],2),t._v(" "),a("div",{staticClass:"operateBox"},[a("div",{staticClass:"operateItem"},[a("img",{attrs:{src:"static/images/icon/time.png",alt:""}}),t._v(" "),a("span",{staticClass:"tab1"},[t._v(t._s(e.studyDuration))])]),t._v(" "),a("div",{staticClass:"operateItem"},[a("img",{attrs:{src:"static/images/icon/top.png",alt:""}}),t._v(" "),a("span",{staticClass:"tab2"},[t._v(t._s(e.examRankingMax)+"分")])]),t._v(" "),a("div",{staticClass:"operateItem",on:{click:function(a){t.toClassRecord(e)}}},[a("img",{attrs:{src:"static/images/icon/lishi.png",alt:""}}),t._v(" "),a("span",{staticClass:"tab4"},[t._v("查历史")])]),t._v(" "),a("div",{staticClass:"operateItem",on:{click:function(a){t.toCheck(e)}}},[a("img",{attrs:{src:"static/images/icon/ceyice.png",alt:""}}),t._v(" "),a("span",{staticClass:"tab5"},[t._v("测一测")])])])],1)}))],1):a("div",{staticStyle:{"padding-top":"0.5px"}},[a("noGood")],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(l,n,!1,function(t){a("z5TD")},"data-v-220c3873",null);e.default=u.exports},z5TD:function(t,e){}});