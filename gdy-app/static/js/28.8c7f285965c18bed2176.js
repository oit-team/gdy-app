webpackJsonp([28],{A39Z:function(t,e){},WiS3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("eqfM");var o=s("/QYm"),i=s("roHx"),a=s("mZzF"),l=s("4duW"),n=s("xo02"),c={name:"styleDetail",components:{mslider:i.a,mPopup:a.a,loadAll:l.a,imgPreview:n.a},data:function(){return{options1:{zIndex:9999,loop:!1},title:"商品",collImgs:[],collInfo:{collInterpretation:""},isLoop:!0,showPreview:!1,situationsList:[],goodsSingle:[],fold:!0,reasonDesc:"",rem:"",showExchangeButton:!1,curImgIndex:1,goodsId:null}},created:function(){this.goodsId=this.$route.query.collId},methods:{handleFold:function(){this.fold=!this.fold},copy:function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.className="oInput",e.style.display="none",Object(o.a)("复制成功")},changePreview:function(t){this.showPreview=t},getImg:function(t){this.showPreview=!0,this.curImgIndex=t},infoShow:function(){this.$refs.info_pop.show()},imgLoad:function(){this.initOrLoadScrollView()},toGoods:function(t){var e={path:"/goodsDetail2",query:{styleId:t,stamp:(new Date).getTime()}};this.$router.push(e)},back:function(){this.$router.go(-1)},initOrLoadScrollView:function(){var t=this;t.$nextTick(function(){t.pageWrapper?t.pageWrapper.refresh():(t.pageWrapper=new t.$BScroll(t.$refs.page,{scrollX:!1,scrollY:!0,click:!0,probeType:3,useTransition:!1}),t.pageWrapper.on("scroll",function(e){Math.abs(e.y)-80<=0?t.$refs.header.style.opacity=0:Math.abs(e.y)-80>0&&(t.$refs.header.style.opacity=(Math.abs(e.y)-80)/180)}))})},getStyleInfo:function(t){var e=this,s={brandId:localStorage.brandId,id:t,userId:localStorage.userId};e.$axios.post("/api/coll/info",s).then(function(t){var s=t.data;"200"==s.code&&(s.data.collLabel?s.data.collLabel=s.data.collLabel.split(",").join("  "):s.data.collLabel="无",s.data.imgUrls=s.data.imgUrls.split(","),e.collInfo=s.data,e.collInfo.situations&&(e.situationsList=e.collInfo.situations.split(",")),e.isLoop=e.collInfo.imgUrls.length>1,e.goodsSingle=e.collInfo.styleList,e.title=e.collInfo.collName,e.collInfo.collInterpretation&&(e.reasonDesc=e.htmlToStr(e.collInfo.collInterpretation))),e.$refs.slider.update()}).catch(function(t){console.log(t)})},htmlToStr:function(t){return t.split("<br>").join("")},getRem:function(){return window.innerWidth/375*22}},watch:{reasonDesc:function(){this.$nextTick(function(){console.log("nextTick");var t=parseFloat(this.getRem());if(console.log("watch 中的rem",t),this.$refs.desc){var e=window.getComputedStyle(this.$refs.desc).height.replace("px","");console.log("descHeight:"+e),console.log("如果 descHeight 超过"+3*t+"就要显示展开按钮"),e>=3*t?(this.showExchangeButton=!0,this.fold=!0):this.showExchangeButton=!1}else console.log("desc null")}.bind(this))},$route:function(t,e){if("/goodsDetail2"==e.path)for(var s=0;s<this.goodsSingle.length;s++)this.goodsSingle[s].id==e.query.styleId&&(this.goodsSingle[s].leaFlag="0")}},mounted:function(){this.getStyleInfo(this.$route.query.collId)},updated:function(){this.initOrLoadScrollView()}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"styleMain"},on:{touchmove:function(t){t.preventDefault()}}},[o("div",{staticClass:"header"},[o("div",{staticClass:"header_one",on:{click:t.back}},[t._m(0)]),t._v(" "),o("div",{ref:"header",staticClass:"header_two",on:{click:t.back}},[o("img",{attrs:{src:"static/images/dev/back@2x.png"}})])]),t._v(" "),o("div",{ref:"page",staticClass:"page"},[o("div",{staticClass:"page_scroll_content"},[o("div",{staticClass:"head_img"},[o("mslider",{ref:"slider",attrs:{loop:t.isLoop,"auto-play":!1}},t._l(t.collInfo.imgUrls,function(e,s){return o("div",{key:s,staticClass:"img_wrapper"},[o("img",{attrs:{src:e,alt:""},on:{click:function(e){t.getImg(s)}}})])}))],1),t._v(" "),o("div",{staticClass:"base"},[t.situationsList?o("div",{staticClass:"suitBox"},t._l(t.situationsList,function(e,s){return o("span",{key:s,staticClass:"item"},[t._v(t._s(e))])})):t._e(),t._v(" "),o("div",{staticClass:"recReason"},[""!==t.reasonDesc?o("div",{staticClass:"recTit"},[o("span",{staticClass:"tit"},[t._v("推荐理由")]),t._v(" "),o("img",{attrs:{src:"static/images/icon/copy.png",alt:""}}),t._v(" "),o("span",{staticClass:"copyBtn",on:{click:function(e){t.copy(t.reasonDesc)}}},[t._v("复制")])]):t._e(),t._v(" "),""!==t.reasonDesc?o("div",{ref:"desc",staticClass:"recDesc",class:t.fold?"fold":"unfold"},[t._v(t._s(t.reasonDesc))]):t._e(),t._v(" "),t.showExchangeButton?o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:t.fold,expression:"fold"}],staticClass:"show",on:{click:t.handleFold}},[t._v("展开")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.fold,expression:"!fold"}],staticClass:"show",on:{click:t.handleFold}},[t._v("收起")])]):t._e()])]),t._v(" "),o("div",{staticClass:"recList"},t._l(t.goodsSingle,function(e,i){return o("div",{key:i,staticClass:"item",on:{click:function(s){t.toGoods(e.id)}}},[o("div",{staticClass:"imgBox"},[o("img",{attrs:{src:e.imgUrl,alt:""},on:{load:t.imgLoad}}),t._v(" "),o("div",{staticClass:"tipBox"},[1==e.styleFlag?o("img",{staticClass:"key-tip-img",attrs:{src:s("MCze"),alt:""}}):t._e(),t._v(" "),1==e.leaFlag?o("img",{staticClass:"learnIcon",attrs:{src:s("xbbm"),alt:""}}):t._e(),t._v(" "),0==e.videoFlag?o("img",{staticClass:"videoIcon",attrs:{src:s("k88Q"),alt:""}}):t._e()])]),t._v(" "),o("div",{staticClass:"num"},[t._v(t._s(e.styleNo))]),t._v(" "),o("div",{staticClass:"price"},[t._v("￥"+t._s(e.stylePrice))])])})),t._v(" "),o("loadAll")],1)]),t._v(" "),t.showPreview?o("imgPreview",{attrs:{imgList:t.collInfo.imgUrls,fromPage:"brandCollDetail",curIndex:t.curImgIndex,isShowPreview:t.showPreview,goodsId:t.goodsId},on:{func:t.changePreview}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:"static/images/dev/back_white@2x.png"}})])}]};var d=s("VU/8")(c,r,!1,function(t){s("A39Z")},"data-v-68984f09",null);e.default=d.exports}});