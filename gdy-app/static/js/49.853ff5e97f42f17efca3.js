webpackJsonp([49],{PckM:function(t,s){},kFb7:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("mvHQ"),a=e.n(i),o=e("bOdI"),l=e.n(o),c=(e("XmAh"),e("il3B")),n=e("LOkV"),r=e("4duW"),d=e("tdg1"),h={name:"",components:l()({loadAll:r.a,noGood:d.a},c.a.Component.name,c.a.Component),data:function(){var t;return t={value:"",defaultValue:"毛衣",searchList:[{}],page:1,pageSize:8,isLoaded:!0,isOver:!1,resTotal:0,choosedList:[],show:!1,activeSeasonId:null,seasonList:[],activeSeriesId:null,seriesList:[],currentPage:1},l()(t,"pageSize",12),l()(t,"styleListFlag",!0),l()(t,"styleList",[]),l()(t,"styleTotal",0),t},created:function(){},mounted:function(){this.getSeasonList()},updated:function(){},activated:function(){localStorage.singleList&&(this.choosedList=JSON.parse(localStorage.singleList));for(var t=0;t<this.styleList.length;t++)this.styleList[t].choosed=!1;if(this.choosedList.length>0)for(var s=0;s<this.choosedList.length;s++)for(var e=0;e<this.styleList.length;e++)if(this.choosedList[s].id==this.styleList[e].id){this.styleList[e].choosed=!0;break}},methods:{back:function(){this.$router.go(-1),localStorage.removeItem("search"),this.choosedList.length>0&&(this.choosedList=[])},goGoodDetail:function(t){this.$router.push({path:"/goodsDetail2",query:{styleId:t,stamp:(new Date).getTime()}})},loadedImg:function(){},iptfocus:function(){this.$router.push({path:"/searchSingle",query:{stamp:(new Date).getTime()}})},getSeasonList:function(){var t=this,s={brandId:localStorage.brandId,typeId:1};t.$axios.post("/api/dic/normalList",s).then(function(s){var e=s.data;"200"==e.code&&(t.seasonList=e.data,t.activeSeasonId=e.data[0].id,t.getSeriesList())}).catch(function(t){console.log(t)})},clickKindItem:function(t){this.activeSeasonId!=t.id&&(this.activeSeasonId=t.id,this.getSeriesList())},getSeriesList:function(){var t=this,s={brandId:localStorage.brandId,sId:t.activeSeasonId};t.$axios.post("/api/series/getSeriesListById",s).then(function(s){var e=s.data;"200"==e.code&&(t.seriesList=e.data,t.activeSeriesId=e.data[0].id,t.styleList=[],t.styleListFlag=!0,t.getStylesList())}).catch(function(t){console.log(t)})},clickItem:function(t,s){this.activeSeriesId!=t?(this.activeSeriesId=t,this.currentPage=1,this.styleList=[],this.styleListFlag=!0,this.getStylesList(),this.activeSeriesId<t?this.$refs.kindTopScroll.scrollToElement(event.currentTarget,500):event.currentTarget.previousElementSibling?this.$refs.kindTopScroll.scrollToElement(event.currentTarget.previousElementSibling,500):this.$refs.kindTopScroll.scrollToElement(event.currentTarget,500)):this.activeSeriesId=t},getStylesList:function(){var t=this,s=localStorage.brandId,e=localStorage.userId,i={brandId:s,bandId:null,sid:t.activeSeriesId,userId:e,currentPage:this.currentPage,pageSize:this.pageSize};t.$axios.post("/api/series/getStyleList",i).then(function(s){var e=s.data;if(t.styleListFlag=!1,"200"==e.code){t.styleTotal=e.data.total,1==t.currentPage?t.styleList=e.data.list:t.styleList=t.styleList.concat(e.data.list);for(var i=0;i<t.styleList.length;i++)t.$set(t.styleList[i],"choosed",!1);if(t.choosedList.length>0)for(var a=0;a<t.choosedList.length;a++)for(var o=0;o<t.styleList.length;o++)if(t.choosedList[a].id==t.styleList[o].id){t.styleList[o].choosed=!0;break}}else t.$toast(e.data)}).catch(function(s){t.$toast(s)})},keyStyleRefresh:function(){this.currentPage=1,this.getStylesList()},keyStyleLoadMore:function(){this.styleList.length<this.styleTotal?(this.currentPage++,this.getStylesList()):this.$refs.keyStyleScroll.update(!0)},addSingle:function(t){if(this.choosedList.length<5){for(var s=!1,e=0;e<this.choosedList.length;e++)if(this.choosedList[e].id==t.id){s=!0;break}if(s)this.$toast("该单品已存在");else{for(var i=0;i<this.styleList.length;i++)t.id==this.styleList[i].id&&(this.styleList[i].choosed=!0);this.choosedList.push(t)}}else this.$toast("最多只能选择5件单品");localStorage.singleList=a()(this.choosedList)},viewChoosedSingle:function(){this.choosedList.length>0?this.show=!0:this.$toast("您还未选择单品")},delSingle:function(t){for(var s=0;s<this.choosedList.length;s++)if(this.choosedList[s].id==t.id){this.choosedList.splice(s,1),0==this.choosedList.length&&(this.show=!1);for(var e=0;e<this.styleList.length;e++)t.id==this.styleList[e].id&&(this.styleList[e].choosed=!1);break}localStorage.singleList=a()(this.choosedList)},conChoosedSingle:function(){0==this.choosedList.length?this.$toast("您还未选择搭配单品"):this.$router.push({path:"/addCollocation",query:{choosedList:this.choosedList,recommentReason:this.$route.query.recommentReason,activeSuit:this.$route.query.activeSuit,collImgList:this.$route.query.collImgList,tempImgList:this.$route.query.tempImgList,collId:this.$route.query.collId}})},search:function(t){var s=this;""==s.value&&(s.value=s.defaultValue),1==s.page&&n.a.loading(),s.$axios.get("/api/style/search/"+s.value+"?currentPage="+s.page+"&pageSize="+s.pageSize+"&brandId="+localStorage.brandId).then(function(t){var e=t.data;"200"==e.code&&(1==s.page?s.searchList=e.data.list:s.searchList=s.searchList.concat(e.data.list),s.resTotal=e.data.total)}).catch(function(t){console.log(t)})},rescollRefresh:function(){this.page=1,this.searchList=[],this.search()},rescollLoadMore:function(){this.searchList.length<this.resTotal?(this.page++,this.search()):this.$refs.searchResScroll.update(!0)},toGoods:function(t){var s={path:"/goodsDetail2",query:{styleId:t,stamp:(new Date).getTime()}};localStorage.search=this.value,this.$router.push(s)}}},u={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"addSingle"},on:{touchmove:function(t){t.preventDefault()}}},[i("div",{staticClass:"hd_select"},[i("img",{attrs:{src:"static/images/dev/back@2x.png"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"hd_input_wrap",on:{click:function(s){t.iptfocus()}}},[i("span",{staticStyle:{color:"#777","font-size":"6.5px"}},[t._v("商品款号、名称")])]),t._v(" "),i("div",{staticClass:"search",on:{click:function(s){t.iptfocus()}}},[t._v("搜索")])]),t._v(" "),i("Scroll",{ref:"kindTitScroll",staticClass:"kindTitBox",attrs:{probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!0,pullDown:!1,pullUp:!1}},[i("ul",{staticClass:"kindTitUl"},t._l(t.seasonList,function(s,e){return i("li",{key:e,staticClass:"kindTitItem",class:[s.id==t.activeSeasonId?"active":""],on:{click:function(e){t.clickKindItem(s)}}},[i("span",{staticClass:"styleName"},[t._v(t._s(s.fitOccasionName))])])}))]),t._v(" "),i("Scroll",{ref:"kindTopScroll",staticClass:"kindTopBox",attrs:{listenScroll:!0,probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!0,pullDown:!1,pullUp:!1}},[i("ul",{staticClass:"scrollUl"},t._l(t.seriesList,function(s,e){return i("li",{key:e,staticClass:"kindItem",class:[s.id==t.activeSeriesId?"active":""],on:{click:function(e){t.clickItem(s.id,s.seriesName)}}},[i("span",{staticClass:"styleName"},[t._v(t._s(s.seriesName))])])}))]),t._v(" "),t.styleListFlag?i("div",{staticStyle:{flex:"1",overflow:"hidden"}},[i("van-loading",{attrs:{color:"#00a2ea"}})],1):i("Scroll",{ref:"keyStyleScroll",staticClass:"keyStyleCon",attrs:{"update-data":[t.styleList],"refresh-data":[],probeType:3,listenScroll:!0,autoUpdate:!1,scrollX:!1,scrollY:!0},on:{pullingDown:t.keyStyleRefresh,pullingUp:t.keyStyleLoadMore}},[i("div",[t.styleList.length>0?i("div",{staticClass:"keyStyleDataBox "},[i("div",{staticClass:"clear"},t._l(t.styleList,function(s,a){return i("div",{key:a,staticClass:"keyStyle-item fl"},[i("div",{staticClass:"goods-img-box"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.imgUrl,expression:"item.imgUrl"}],staticClass:"goods-img",attrs:{alt:""}}),t._v(" "),i("div",{staticClass:"tipBox"},[1==s.styleFlag?i("img",{staticClass:"key-tip-img",attrs:{src:e("MCze"),alt:""}}):t._e(),t._v(" "),1==s.leaFlag?i("img",{staticClass:"learnIcon",attrs:{src:e("xbbm"),alt:""}}):t._e(),t._v(" "),0==s.videoFlag?i("img",{staticClass:"videoIcon",attrs:{src:e("k88Q"),alt:""}}):t._e()]),t._v(" "),i("div",{staticClass:"addIcon"},[s.choosed?i("img",{attrs:{src:"static/images/icon/a-reduce.png",alt:""},on:{click:function(e){e.stopPropagation(),t.delSingle(s)}}}):i("img",{attrs:{src:"static/images/icon/add1.png",alt:""},on:{click:function(e){e.stopPropagation(),t.addSingle(s)}}})])]),t._v(" "),i("div",{staticClass:"goods-num"},[t._v(t._s(s.styleNo))]),t._v(" "),i("div",{staticClass:"goods-stylePrice"},[i("div",{staticClass:"money-symbel"},[t._v("¥"+t._s(s.stylePrice))])])])})),t._v(" "),i("div",{staticStyle:{height:"0.5px",background:"transprant"}})]):i("div",{staticStyle:{"padding-top":"0.5px"}},[i("noGood")],1)])]),t._v(" "),i("div",{staticClass:"choosedBox"},[i("div",{staticClass:"chooseNums",on:{click:t.viewChoosedSingle}},[t._v("已选中："+t._s(t.choosedList.length)+"/5")]),t._v(" "),i("div",{staticClass:"conBtn",on:{click:t.conChoosedSingle}},[t._v("确认")])]),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i("ul",{staticClass:"ulList"},t._l(t.choosedList,function(s,e){return i("li",{key:e},[i("img",{attrs:{src:s.imgUrl,alt:""}}),t._v(" "),i("div",{staticClass:"baseInfo"},[i("div",{staticClass:"styleName"},[t._v(t._s(s.styleName))]),t._v(" "),i("div",{staticClass:"styleNo"},[t._v(t._s(s.styleNo))]),t._v(" "),i("div",{staticStyle:{color:"rgba(184, 5, 2, 1)"}},[t._v("￥"),i("span",[t._v(t._s(s.stylePrice))])])]),t._v(" "),i("div",{staticClass:"delBtn",on:{click:function(e){e.stopPropagation(),t.delSingle(s)}}},[t._v("删除")])])}))])],1)},staticRenderFns:[]};var g=e("VU/8")(h,u,!1,function(t){e("PckM")},"data-v-109bb86e",null);s.default=g.exports}});