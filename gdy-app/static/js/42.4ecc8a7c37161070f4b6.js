webpackJsonp([42],{P4af:function(t,s){},"Vij+":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("eqfM");var a=e("/QYm"),i=e("roHx"),o=e("mZzF"),l=e("4duW"),n=e("xo02"),c={name:"styleDetail",components:{mslider:i.a,mPopup:o.a,loadAll:l.a,imgPreview:n.a},data:function(){return{goodsId:null,options1:{zIndex:9999,loop:!1},title:"商品",collImgs:[],collInfo:{collInterpretation:""},isLoop:!0,showPreview:!1,curImgIndex:1,situationsList:[],goodsSingle:[],fold:!0,reasonDesc:"",rem:"",showExchangeButton:!1,commentList:[],aeFlag:0,aeNumber:0,collStatus:null,approvalList:[]}},created:function(){this.collStatus=this.$route.query.collStatus,this.$route.query.collInfo&&(this.approvalList=this.$route.query.collInfo.approvalList),this.goodsId=this.$route.query.collId},mounted:function(){this.getStyleInfo(this.$route.query.collId)},updated:function(){this.initOrLoadScrollView()},activated:function(){this.getShopCollComment()},methods:{collPraise:function(){var t=this;if(t.aeFlag)t.$toast("您已点赞该搭配");else{var s={collId:t.$route.query.collId,userId:localStorage.userId};t.$axios.post("/api/coll/addPutApt",s).then(function(s){"200"==s.data.code?t.aeFlag||(t.aeFlag=!t.aeFlag,t.aeNumber=t.aeNumber+1):t.$toast(s.data.message)}).catch(function(t){console.log(t)})}},handleFold:function(){this.fold=!this.fold},copy:function(t){var s=document.createElement("input");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("Copy"),s.className="oInput",s.style.display="none",Object(a.a)("复制成功")},changePreview:function(t){this.showPreview=t},getImg:function(t){this.showPreview=!0,this.curImgIndex=t},infoShow:function(){this.$refs.info_pop.show()},imgLoad:function(){this.initOrLoadScrollView()},toGoods:function(t){var s={path:"/goodsDetail2",query:{styleId:t,stamp:(new Date).getTime()}};this.$router.push(s)},back:function(){this.$router.go(-1)},getShopCollComment:function(){var t=this,s={collId:t.$route.query.collId,currentPage:1,pageSize:3};t.$axios.post("/api/coll/queryCollEvtion",s).then(function(s){"200"==s.data.code?t.commentList=s.data.data.list:t.$toast(s.data.message)}).catch(function(t){console.log(t)})},toShopCollComment:function(){this.$router.push({path:"/shopCollComment",query:{collId:this.$route.query.collId}})},initOrLoadScrollView:function(){var t=this;t.$nextTick(function(){t.pageWrapper?t.pageWrapper.refresh():(t.pageWrapper=new t.$BScroll(t.$refs.page,{scrollX:!1,scrollY:!0,click:!0,probeType:3,useTransition:!1}),t.pageWrapper.on("scroll",function(s){Math.abs(s.y)-80<=0?t.$refs.header.style.opacity=0:Math.abs(s.y)-80>0&&(t.$refs.header.style.opacity=(Math.abs(s.y)-80)/180)}))})},getStyleInfo:function(t){var s=this,e={brandId:localStorage.brandId,id:t,userId:localStorage.userId};s.$axios.post("/api/coll/info",e).then(function(t){var e=t.data;"200"==e.code&&(e.data.collLabel?e.data.collLabel=e.data.collLabel.split(",").join("  "):e.data.collLabel="无",e.data.imgUrls=e.data.imgUrls.split(","),s.collInfo=e.data,s.aeNumber=s.collInfo.aeNumber,s.aeFlag=s.collInfo.aeFlag,s.collInfo.situations&&(s.situationsList=s.collInfo.situations.split(",")),s.isLoop=s.collInfo.imgUrls.length>1,s.goodsSingle=s.collInfo.styleList,s.title=s.collInfo.collName,s.collInfo.collInterpretation&&(s.reasonDesc=s.htmlToStr(s.collInfo.collInterpretation))),s.$refs.slider.update()}).catch(function(t){console.log(t)})},htmlToStr:function(t){if(t)return t.split("<br>").join("")},getRem:function(){return window.innerWidth/375*22}},watch:{reasonDesc:function(){this.$nextTick(function(){var t=parseFloat(this.getRem());this.$refs.desc&&(window.getComputedStyle(this.$refs.desc).height.replace("px","")>=3*t?(this.showExchangeButton=!0,this.fold=!0):this.showExchangeButton=!1)}.bind(this))},$route:function(t,s){if("/goodsDetail2"==s.path)for(var e=0;e<this.goodsSingle.length;e++)this.goodsSingle[e].id==s.query.styleId&&(this.goodsSingle[e].leaFlag="0")}}},r={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"styleMain"},on:{touchmove:function(t){t.preventDefault()}}},[a("div",{staticClass:"header"},[a("div",{staticClass:"header_one",on:{click:t.back}},[t._m(0)]),t._v(" "),a("div",{ref:"header",staticClass:"header_two",on:{click:t.back}},[a("img",{attrs:{src:"static/images/dev/back@2x.png"}})])]),t._v(" "),a("div",{ref:"page",staticClass:"page"},[a("div",{staticClass:"page_scroll_content"},[a("div",{staticClass:"head_img"},[a("mslider",{ref:"slider",attrs:{loop:t.isLoop,"auto-play":!1}},t._l(t.collInfo.imgUrls,function(s,e){return a("div",{key:e,staticClass:"img_wrapper"},[a("img",{attrs:{src:s,alt:""},on:{click:function(s){t.getImg(e)}}})])}))],1),t._v(" "),a("div",{staticClass:"base"},[a("div",{staticClass:"baseInnerBox"},[t.situationsList?a("div",{staticClass:"suitBox"},t._l(t.situationsList,function(s,e){return a("span",{key:e,staticClass:"item"},[t._v(t._s(s))])})):t._e(),t._v(" "),3==t.collStatus?a("div",{staticClass:"praiseBox",on:{click:t.collPraise}},[a("div",{staticClass:"nums"},[t._v(t._s(t.aeNumber))]),t._v(" "),a("img",{staticClass:"praiseIcon",attrs:{src:"static/images/icon/praise1.png",alt:""}})]):t._e()]),t._v(" "),a("div",{staticClass:"recReason"},[""!==t.reasonDesc?a("div",{staticClass:"recTit"},[a("span",{staticClass:"tit"},[t._v("推荐理由")]),t._v(" "),a("img",{attrs:{src:"static/images/icon/copy.png",alt:""}}),t._v(" "),a("span",{staticClass:"copyBtn",on:{click:function(s){t.copy(t.reasonDesc)}}},[t._v("复制")])]):t._e(),t._v(" "),""!==t.reasonDesc?a("div",{ref:"desc",staticClass:"recDesc",class:t.fold?"fold":"unfold"},[t._v(t._s(t.reasonDesc))]):t._e(),t._v(" "),t.showExchangeButton?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.fold,expression:"fold"}],staticClass:"show",on:{click:t.handleFold}},[t._v("展开")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.fold,expression:"!fold"}],staticClass:"show",on:{click:t.handleFold}},[t._v("收起")])]):t._e()])]),t._v(" "),a("div",{staticClass:"recList"},t._l(t.goodsSingle,function(s,i){return a("div",{key:i,staticClass:"item",on:{click:function(e){t.toGoods(s.id)}}},[a("div",{staticClass:"imgBox"},[a("img",{attrs:{src:s.imgUrl,alt:""},on:{load:t.imgLoad}}),t._v(" "),a("div",{staticClass:"tipBox"},[1==s.styleFlag?a("img",{staticClass:"key-tip-img",attrs:{src:e("MCze"),alt:""}}):t._e(),t._v(" "),1==s.leaFlag?a("img",{staticClass:"learnIcon",attrs:{src:e("xbbm"),alt:""}}):t._e(),t._v(" "),0==s.videoFlag?a("img",{staticClass:"videoIcon",attrs:{src:e("k88Q"),alt:""}}):t._e()])]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(s.styleNo))]),t._v(" "),a("div",{staticClass:"price"},[t._v("￥"+t._s(s.stylePrice))])])})),t._v(" "),3==t.collStatus?a("div",{staticClass:"collCommentbox"},[a("div",{staticClass:"commentTit",on:{click:t.toShopCollComment}},[a("span",{staticClass:"tit"},[t._v("搭配评论")]),t._v(" "),a("img",{attrs:{src:"static/images/icon/rightArrowGrey.png",alt:""}})]),t._v(" "),t.commentList&&t.commentList.length>0?a("div",t._l(t.commentList,function(s,e){return a("div",{key:e,staticClass:"comCon"},[s.content?a("div",{staticClass:"inner"},[t._v(t._s(s.content))]):a("div",{staticClass:"inner"},[t._v("颜色正尺码标准,面料柔软超级舒服,上身很合适,推荐购买哦，导购小姐姐很热心,推荐的都是适合的一整套,不用再为搭配衣服烦恼了")]),t._v(" "),a("div",{staticClass:"avatarBox"},[s.headPortrait?a("img",{attrs:{src:s.headPortrait,alt:""}}):a("img",{attrs:{src:"static/images/default/avatarGirl.png",alt:""}}),t._v(" "),s.userName?a("span",{staticClass:"userName"},[t._v(t._s(s.userName))]):t._e(),t._v(" "),a("span",{staticClass:"praise"},[t._v(t._s(s.pjTime))])])])})):a("div",{staticClass:"noData"},[t._v("\n          暂无评论\n        ")])]):t._e(),t._v(" "),t.approvalList&&t.approvalList.length>0?a("div",{staticClass:"refusedBox"},[a("div",{staticClass:"refuseTit"},[t._v("审批记录")]),t._v(" "),a("van-steps",{attrs:{direction:"vertical","active-icon":"underway","inactive-icon":"underway","active-color":"#969799","inactive-color":"#969799"}},t._l(t.approvalList,function(s,e){return a("van-step",{key:e},[a("p",{staticClass:"tit"},[t._v(t._s(s.remark))]),t._v(" "),a("p",{staticClass:"time"},[t._v(t._s(s.createDate))])])}))],1):t._e(),t._v(" "),a("loadAll")],1)]),t._v(" "),t.showPreview?a("imgPreview",{attrs:{imgList:t.collInfo.imgUrls,fromPage:"shopCollDetail",curIndex:t.curImgIndex,isShowPreview:t.showPreview,goodsId:t.goodsId},on:{func:t.changePreview}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("img",{attrs:{src:"static/images/dev/back_white@2x.png"}})])}]};var d=e("VU/8")(c,r,!1,function(t){e("P4af")},"data-v-29c5c630",null);s.default=d.exports}});