webpackJsonp([20],{"92mo":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("LOkV"),l={name:"",data:function(){return{title:"",firstSelected:"",secondSelected:"",firstTabs:[],secondTabs:[],collList:[]}},methods:{back:function(){localStorage.removeItem("styleFirstSel"),localStorage.removeItem("styleSecondSel"),this.$router.go(-1)},toSearch:function(){this.$router.push("/search")},initOrLoadScrollView:function(){var t=this;t.$nextTick(function(){t.first_tab_wrapper?t.first_tab_wrapper.refresh():t.first_tab_wrapper=new t.$BScroll(t.$refs.head_tab_wrapper,{scrollX:!0,scrollY:!1,click:!0}),t.second_tab_wrapper?t.second_tab_wrapper.refresh():t.second_tab_wrapper=new t.$BScroll(t.$refs.leftTabScroll,{scrollX:!1,scrollY:!0,click:!0,bounce:{top:!1,bottom:!1}}),t.style_wrapper?t.style_wrapper.refresh():t.style_wrapper=new t.$BScroll(t.$refs.contentScroll,{scrollX:!1,scrollY:!0,click:!0,probeType:3})})},firstClick:function(t,e){this.firstSelected!=t&&(this.firstSelected=t,this.first_tab_wrapper.scrollToElement(e.currentTarget,500))},secondClick:function(t){this.secondSelected!=t&&(this.secondSelected=t)},goStyle:function(t){localStorage.styleFirstSel=this.firstSelected,localStorage.styleSecondSel=this.secondSelected,this.$router.push({path:"/styleDetail",query:{collId:t,stemp:(new Date).getTime()}})},getSituationList:function(t,e){var s=this,i={brandId:localStorage.brandId,typeId:3,supId:t};s.$axios.post("/api/dic/situationList",i).then(function(t){console.log(t);var i=t.data;"200"==i.code&&(s.firstTabs=i.data,s.firstSelected=null==localStorage.styleFirstSel?e:localStorage.styleFirstSel)}).catch(function(t){console.log(t)})},getClassifyList:function(){var t=this,e={brandId:localStorage.brandId,typeId:2,seasonId:t.seasonId,sId:t.firstSelected};t.$axios.post("/api/dic/normalList",e).then(function(e){console.log("三级分类品类列表为",e);var s=e.data;"200"==s.code&&(t.secondTabs=s.data,t.secondSelected=null==localStorage.styleSecondSel?t.secondTabs[0].id:localStorage.styleSecondSel,t.getCollectionList())}).catch(function(t){console.log(t)})},getCollectionList:function(){i.a.loading();var t=this;if(""!=t.firstSelected&&""!=t.secondSelected){var e={brandId:localStorage.brandId,sId:t.firstSelected,modeId:t.secondSelected,seasonId:t.seasonId};t.$axios.post("/api/coll/list",e).then(function(e){var s=e.data;"200"==s.code&&(t.collList=s.data)}).catch(function(t){console.log(t)})}else t.collList=[]},htmlToStr:function(t){return t.split("<br>").join(" ")}},updated:function(){this.initOrLoadScrollView()},mounted:function(){var t=this.$route.query.id,e=this.$route.query.sId;this.seasonId=this.$route.query.seasonId,this.title=this.$route.query.title,this.getSituationList(t,e)},watch:{firstSelected:function(t){for(var e=0;e<this.firstTabs.length;e++)if(this.firstTabs[e].id==t){var s=100*e;this.$refs.cursor.style.transform="translateX("+s+"%)";break}this.getClassifyList()},secondSelected:function(t){this.getCollectionList()}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main",on:{touchmove:function(t){t.preventDefault()}}},[s("div",{staticClass:"header"},[s("div",{on:{click:t.back}},[s("img",{attrs:{src:"static/images/dev/back@2x.png"}})]),t._v(" "),s("span",[t._v(t._s(t.title))]),t._v(" "),s("div",{on:{click:t.toSearch}},[s("img",{attrs:{src:"static/images/collocation/select@2x.png"}})])]),t._v(" "),s("div",{ref:"head_tab_wrapper",staticClass:"hd_container"},[s("ul",{staticClass:"hd_tab_wrap"},[t._l(t.firstTabs,function(e,i){return s("li",{key:i,staticClass:"hd_tab_item",class:{active:e.id==t.firstSelected},attrs:{id:e.id},on:{click:function(s){t.firstClick(e.id,s)}}},[t._v("\n        "+t._s(e.fitOccasionName)+"\n      ")])}),t._v(" "),s("i",{ref:"cursor",staticClass:"cursor"})],2)]),t._v(" "),s("div",{staticClass:"content"},[s("div",{ref:"leftTabScroll",staticClass:"left_tab"},[s("ul",t._l(t.secondTabs,function(e,i){return s("li",{key:i,staticClass:"left_tab_item",class:{active:e.id==t.secondSelected},on:{click:function(s){t.secondClick(e.id)}}},[s("p",[t._v(t._s(e.fitOccasionName))])])}))]),t._v(" "),s("div",{ref:"contentScroll",staticClass:"right_content"},[s("ul",{staticClass:"goods_list"},[t._l(t.collList,function(e,i){return s("li",{key:i,on:{click:function(s){t.goStyle(e.id)}}},[s("img",{attrs:{src:e.imgUrl}}),t._v(" "),s("span",[t._v(t._s(t.htmlToStr(e.collInterpretation)))]),t._v(" "),s("span",[t._v(t._s(e.collName))])])}),t._v(" "),0===t.collList.length?s("div",[t._v("\n          暂无搭配\n        ")]):t._e()],2)])])])},staticRenderFns:[]};var o=s("VU/8")(l,c,!1,function(t){s("TwsW")},"data-v-f4f8f9dc",null);e.default=o.exports},TwsW:function(t,e){}});