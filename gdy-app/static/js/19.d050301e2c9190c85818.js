webpackJsonp([19],{xB6U:function(t,e){},zpw0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("Au9i");var a=s("Ylnc"),i=s("SQ1s"),c=s("tdg1"),o={name:"taskCheckTask",components:{Header:a.a,backHeader:i.a,noGood:c.a},data:function(){return{numScore:"",checkLoading:!0,checkTaskListCount:"",checkTaskList:[],bsType:"",page:1,pageSize:16,titleList:[],TITLE:{dictitemDisplayName:"全部",dictitemCode:""},selecteds:"",isActive:0}},created:function(){},mounted:function(){},activated:function(){this.bsType=localStorage.bsType,localStorage.removeItem("ceyice"),localStorage.assessTask?(this.getTitleList(),localStorage.selecteds?this.selecteds=localStorage.selecteds:this.checkTaskShow()):this.checkTaskShow()},watch:{selecteds:function(t,e){for(var s=0;s<this.titleList.length&&t!=this.titleList[s].dictitemCode;s++);this.checkTaskShow(t)}},methods:{back:function(){localStorage.removeItem("selecteds"),this.$router.push({path:"/index"}),this.selecteds=""},getTitleList:function(){var t=this,e={brandId:localStorage.brandId,dictCode:"BS_TYPE_2"},s=this.GLOBAL.g_paramJson(e);t.$axios.post("/task/task/getTitleList",s).then(function(e){t.checkLoading=!1,"0"==e.data.head.status?(t.titleList=e.data.body.titleList,t.titleList.unshift(t.TITLE)):t.$toast(e.data.message)}).catch(function(t){console.log(t)})},set_tab_index:function(t,e){localStorage.selecteds=t,this.selecteds!=t&&(this.isActive!=e&&(this.isActive<e?this.$refs.checkTopScroll.scrollToElement(event.currentTarget,500):event.currentTarget.previousElementSibling?this.$refs.checkTopScroll.scrollToElement(event.currentTarget.previousElementSibling,500):this.$refs.checkTopScroll.scrollToElement(event.currentTarget,500)),this.isActive=e,this.checkLoading=!0,this.selecteds=t)},checkTaskShow:function(){var t=this,e={userId:localStorage.userId,taskType:2,bsCode:localStorage.brandIdGDY,bsType:this.bsType,bsTypeSec:t.selecteds,scopId:"",page:this.page,pageSize:6,querySource:"0"},s=this.GLOBAL.g_paramJson(e);t.$axios.post("/task/task/getTaskList",s).then(function(e){t.checkLoading=!1,"0"==e.data.head.status?1==t.page?(t.checkTaskList=e.data.body.vResult,t.checkTaskListCount=e.data.body.count):(t.checkTaskList=t.checkTaskList.concat(e.data.body.vResult),t.checkTaskListCount=e.data.body.count):t.$toast(e.data.head.msg)}).catch(function(t){console.log(t)})},checkRefresh:function(){this.page=1,this.checkTaskShow()},checkLoadMore:function(){this.checkTaskList.length<this.checkTaskListCount?(this.page++,this.checkTaskShow()):this.$refs.checkScroll.update(!0)},toCheckTask:function(t){return localStorage.selecteds=this.selecteds,localStorage.numScore=t.maxFraction,localStorage.usedTimes=t.usedTimes,localStorage.timesLimit=t.timesLimit,localStorage.taskId=t.taskId,localStorage.dateName=t.tpName,localStorage.issuanceNumber=t.issuanceNumber,(new Date).getTime()<new Date(t.endTime).getTime(new Date(t.endTime))&&(new Date).getTime()>new Date(t.startTime).getTime(new Date(t.startTime))?t.usedTimes&&t.usedTimes>0?(localStorage.endTime=t.endTime,localStorage.startTime=t.startTime,void this.$router.push({path:"./taskBatch",query:{item:t}})):(localStorage.toTestPath="taskCheckTask",void this.$router.push({path:"./taskTest",query:{check:1}})):t.usedTimes&&t.usedTimes>0?void this.$router.push({path:"./taskBatch",query:{item:t}}):void this.$toast("考核时间已过，考核记录为空")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"taskCheckTask"}},[s("div",{staticStyle:{height:"1.2rem"}},[s("backHeader",{attrs:{title:"考核任务"}},[s("span",{staticClass:"head-class f-l",attrs:{slot:"left"},on:{click:t.back},slot:"left"},[t._t("default",[s("img",{staticClass:"back-icon",attrs:{src:"static/images/dev/back@2x.png",alt:""}})])],2),t._v(" "),s("span",{staticClass:"head-class place-label",attrs:{slot:"right"},slot:"right"})])],1),t._v(" "),s("Scroll",{ref:"checkTopScroll",staticClass:"check-box",attrs:{probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!1,pullDown:!1,pullUp:!1}},[s("div",{staticClass:"check-ul"},t._l(t.titleList,function(e,a){return s("div",{key:a,staticClass:"check-item",class:{active:e.dictitemCode==t.selecteds},attrs:{id:e.dictitemCode},on:{click:function(s){t.set_tab_index(e.dictitemCode,a)}}},[t._v("\n        "+t._s(e.dictitemDisplayName)+"\n      ")])}))]),t._v(" "),1==t.checkLoading?s("div",[s("van-loading",{attrs:{color:"#00a2ea"}})],1):s("Scroll",{ref:"checkScroll",staticClass:"checkTaskCon",attrs:{"update-data":[t.checkTaskList],"refresh-data":[],probeType:3,listenScroll:!0,autoUpdate:!1,scrollX:!1,scrollY:!0},on:{pullingDown:t.checkRefresh,pullingUp:t.checkLoadMore}},[t.checkTaskList.length>0?s("div",{staticStyle:{"padding-top":"0.5px"}},[s("div",{staticClass:"checkTask_box"},t._l(t.checkTaskList,function(e,a){return s("div",{key:a,staticClass:"listcheck",on:{click:function(s){t.toCheckTask(e)}}},[s("div",{staticClass:"checkTop"},[s("div",{staticClass:"checkTop_box"},[s("div",{staticClass:"sekuai"}),t._v(" "),s("div",{staticClass:"checkCon_t"},[t._v(t._s(e.tpName))])]),t._v(" "),s("span",{staticClass:"checkRspan"},[t._v(t._s(e.maxFraction))]),s("span",{staticClass:"Rspan"},[t._v(" 分")])]),t._v(" "),s("div",{staticClass:"checkBom"},[s("div",{staticClass:"box_top"},[s("div",{staticClass:"check_top"},[s("div",{staticClass:"box_b"},[t._v(t._s(e.startTime))]),t._v(" "),s("div",{staticClass:"box_t"},[s("span",{staticClass:"Pspan"},[t._v("限考次数")]),t._v(" "),e.timesLimit>0?s("span",{staticClass:"Rspan"},[t._v(t._s(e.timesLimit)+" 次")]):s("span",{staticClass:"Rspan"},[t._v("不限")])])]),t._v(" "),s("div",{staticClass:"check_in"},[s("div",{staticClass:"box_b"},[t._v(t._s(e.endTime))]),t._v(" "),s("div",{staticClass:"box_t"},[s("span",{staticClass:"Pspan"},[t._v("考核次数")]),t._v(" "),s("span",{staticClass:"Gspan"},[t._v(t._s(e.usedTimes)+" 次")])])])]),t._v(" "),s("div",{staticClass:"check_bom"},[e.usedTimes&&e.usedTimes>e.timesLimit&&(new Date).getTime()<new Date(e.endTime).getTime(new Date(e.endTime))||e.timesLimit&&e.usedTimes<e.timesLimit&&(new Date).getTime()<new Date(e.endTime).getTime(new Date(e.endTime))?s("img",{attrs:{src:"static/images/icon/ceyice.png ",alt:""}}):s("img",{attrs:{src:"static/images/icon/end.png ",alt:""}})])])])}))]):s("div",{staticClass:"noData",staticStyle:{"padding-top":"0.5px"}},[s("noGood")],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(o,l,!1,function(t){s("xB6U")},"data-v-f70ad60a",null);e.default=n.exports}});