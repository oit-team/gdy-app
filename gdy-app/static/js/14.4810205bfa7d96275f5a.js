webpackJsonp([14],{"KI0+":function(t,s){},Omvk:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=e("LOkV"),a=e("roHx"),i=e("mZzF"),o=e("4duW"),c=e("tdg1"),r={name:"",components:{},props:["collListData"],data:function(){return{}},mounted:function(){},methods:{toStyleDetail:function(t){this.$router.push({path:"/styleDetail",query:{collId:t,stemp:(new Date).getTime()}})},toGoodsDetail:function(t){var s={path:"/goodsDetail2",query:{styleId:t,stamp:(new Date).getTime()}};this.$router.push(s)}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"collList"}},[e("Scroll",{ref:"collBodyScroll",staticClass:"collBody",attrs:{probeType:3,bounceTime:0,listenScroll:!0,pullDown:!1,pullUp:!1}},[e("div",{staticClass:"brandRecList"},t._l(t.collListData,function(s,l){return e("div",{key:l,staticClass:"brandItem"},[e("img",{attrs:{src:s.imgUrl,alt:""},on:{click:function(e){t.toStyleDetail(s.id)}}}),t._v(" "),e("div",{staticClass:"collLabel"},[t._v(t._s(s.collName))]),t._v(" "),e("Scroll",{ref:"collItemScroll"+(l+1),refInFor:!0,staticClass:"collItemScroll",attrs:{probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!0,pullDown:!1,pullUp:!1}},[e("div",{staticClass:"imgList"},t._l(s.styleList,function(s,l){return e("div",{key:l,staticClass:"imgBox",on:{click:function(e){t.toGoodsDetail(s.id)}}},[e("img",{attrs:{src:s.imgUrl,alt:""}})])}))])],1)}))])],1)},staticRenderFns:[]};var d=e("VU/8")(r,n,!1,function(t){e("KI0+")},"data-v-6274c7e7",null).exports,u=e("xo02"),h={name:"series",components:{mslider:a.a,mPopup:i.a,loadAll:o.a,noGood:c.a,imgPreview:u.a,brandCollList:d},data:function(){return{seasonLabel:"",seasonName:"",selected:0,showImgs:[],headTabs:[],series:{seriesName:"",id:"",seriesLabel:"",seriesInterpretation:""},swiperOption:{loop:!0},isLoop:!0,isShow:!1,picCount:0,showTheme:!0,seriesName1:"",selectedTabs:0,headTabs1:[{id:0,seriesName:"主题解读"},{id:1,seriesName:"单款详解"},{id:2,seriesName:"品牌搭配"},{id:3,seriesName:"店铺搭配"}],showPreview:!1,bandId:null,styleSeriesId:null,currentPage:1,pageSize:15,stylesList:[],stylesFlag:!1,isLoaded:!0,isOver:!1,labelList:null,styleTotal:null,collLoadFlag:!1,collList:[],collocationList:[],seasonId:null,seriesList:[],seriesId:null,collTotal:null,collPageSize:6,collPageNum:1,type:1,curImgIndex:1}},created:function(){console.log("this.$router.query",this.$route.query),this.seasonId=this.$route.query.seasonId},activated:function(){},watch:{$route:function(t,s){if("/goodsDetail2"==s.path)for(var e=0;e<this.stylesList.length;e++)this.stylesList[e].id==s.query.styleId&&(this.stylesList[e].leaFlag="0")},selected:function(t,s){l.a.loading(),this.$refs.slider.destroy()},picCount:function(t){document.querySelectorAll("img[loaded]").length<=t+2&&this.$refs.styleListScroll.refresh()}},mounted:function(){this.bandId=parseInt(this.$route.query.bandId),this.seriesId=parseInt(this.$route.query.seriesId),this.styleSeriesId=this.seriesId,this.seasonName=this.$route.query.seasonName,this.seasonLabel=this.$route.query.bandName,this.getSeries(this.bandId,this.seriesId),this.getSeriesInfo(this.seriesId),this.getStylesList(),this.getSeriesList()},methods:{back:function(){localStorage.removeItem("seriesSel"),this.$router.go(-1)},toStyleDetail:function(t){this.$router.push({path:"/styleDetail",query:{collId:t,stemp:(new Date).getTime()}})},toShopCollDetail:function(t){console.log("去店铺搭配详情页面"),this.$router.push({path:"/shopCollDetail",query:{collId:t,collStatus:3,stemp:(new Date).getTime()}})},toGoodsDetail:function(t){this.$router.push({path:"/goodsDetail2",query:{styleId:t,stemp:(new Date).getTime()}})},changePreview:function(t){this.showPreview=t},getImg:function(t){this.showPreview=!0,this.curImgIndex=t},imgLoad:function(){this.picCount++},changeTab:function(t){var s=this;this.selectedTabs!=t&&(this.selectedTabs=t,2==t&&(this.type=1,this.collPageNum=1,this.collocationList=[],this.collLoadFlag=!1,this.getCollocationList(),setTimeout(function(){var t=document.querySelector(".seriesListBox .active");s.$refs.serieScrollScroll.scrollToElement(t,500)},200)),3==t&&(this.type=2,this.collPageNum=1,this.collocationList=[],this.collLoadFlag=!1,this.getCollocationList(),this.$refs.beautyScroll.scrollToTop()))},getSeriesList:function(){var t=this,s={brandId:localStorage.brandId,seasonId:t.seasonId};console.log(s),t.$axios.post("/api/series/sList",s).then(function(s){var e=s.data;"200"==e.code&&(t.seriesList=e.data,console.log("获取系列筛选项列表数据为",t.seriesList))}).catch(function(t){console.log(t)})},clickSeries:function(t){this.seriesId=t,this.collPageNum=1,this.$refs.collBodyScroll.scrollToTop(),this.collocationList=[],this.collLoadFlag=!1,this.getCollocationList()},getCollocationList:function(){var t=this,s={brandId:localStorage.brandId,seasonId:t.seasonId,seriesId:t.seriesId,sId:-1,modeId:-1,styleName:"",currentPage:t.collPageNum,pageSize:t.collPageSize,type:t.type,status:3};console.log("品牌搭配列表参数",s),t.$axios.post("/api/coll/collList",s).then(function(s){var e=s.data;"200"==e.code&&(t.collLoadFlag=!0,console.log("筛选出的搭配列表为",e.data),t.collTotal=e.data.total,1==t.collPageNum?t.collocationList=e.data.list:t.collocationList=t.collocationList.concat(e.data.list),t.collocationList.length==t.collTotal&&(1==t.type?t.$refs.collBodyScroll.update(!0):t.$refs.beautyScroll.update(!0)),t.initOrReloadScrollView())}).catch(function(t){console.log(t)})},collRefresh:function(){this.type=1,this.collPageNum=1,this.getCollocationList()},collLoadMore:function(){this.collocationList.length<this.collTotal?(this.collPageNum++,this.getCollocationList()):this.$refs.collBodyScroll.update(!0)},shopCollRefresh:function(){this.type=2,this.collPageNum=1,this.getCollocationList()},shopCollLoadMore:function(){this.collocationList.length<this.collTotal?(this.collPageNum++,this.getCollocationList()):this.$refs.beautyScroll.update(!0)},getStylesList:function(){var t=this,s=localStorage.brandId,e=localStorage.userId,l={brandId:s,bandId:this.bandId,sid:this.styleSeriesId,userId:e,currentPage:this.currentPage,pageSize:this.pageSize};t.$axios.post("/api/series/getStyleList",l).then(function(s){var e=s.data;t.stylesFlag=!0,"200"==e.code?(console.log("单款详解获取的数据为,",e,e.list),t.styleTotal=e.data.total,1==t.currentPage?t.stylesList=e.data.list:t.stylesList=t.stylesList.concat(e.data.list),t.stylesList.length==t.styleTotal&&t.$refs.styleListScroll.update(!0)):t.$toast(e.data)}).catch(function(s){t.$toast(s)})},styleRefresh:function(){this.currentPage=1,this.getStylesList()},styleLoadMore:function(){this.stylesList.length<this.styleTotal?(this.currentPage++,this.getStylesList()):this.$refs.styleListScroll.update(!0)},initOrReloadScrollView:function(t){var s=this;s.$nextTick(function(){for(var t=1;t<=s.collocationList.length;t++){var e="collItemScroll"+t;s[e]?s[e].refresh():s[e]=new s.$BScroll(s.$refs[e][0],{scrollX:!0,scrollY:!1,useTransition:!1})}})},getSeries:function(t,s){var e=this,l={brandId:localStorage.brandId,bandId:t};e.$axios.post("/api/series/list",l).then(function(t){var l=t.data;"200"==l.code&&(e.headTabs=l.data),e.selected=null==localStorage.seriesSel?s:localStorage.seriesSel}).catch(function(t){console.log(t)})},getSeriesInfo:function(t){var s=this;s.$axios.get("/api/series/"+t).then(function(e){var l=e.data;"200"==l.code&&(s.series=l.data,console.log("seriesId为",t,"对应的主题详解内容body为",s.series),l.data.imgUrl?(s.showTheme=!0,s.selectedTabs=0,l.data.seriesLabel&&(s.labelList=l.data.seriesLabel.split(",")),s.showImgs=l.data.imgUrl.split(","),1==s.showImgs.length&&(s.isLoop=!1)):(s.showTheme=!1,s.selectedTabs=1)),s.$refs.slider.update()}).catch(function(t){console.log(t)})},ResetImageUrlS:function(t,s){for(var e=t.length,l=0;l<e;l++){var a=t[l],i=a.imgUrl,o=i.lastIndexOf("."),c=i.substr(0,o),r=i.substr(o,i.length-o);a.imgUrl=c+s+r}},goGoods:function(t){localStorage.seriesSel=this.selected,this.$router.push({path:"/goodsDetail2",query:{styleId:t}})}}},g={render:function(){var t=this,s=t.$createElement,l=t._self._c||s;return l("div",{staticClass:"seriesMain",on:{touchmove:function(t){t.preventDefault()}}},[l("div",{staticClass:"header"},[l("div",{staticClass:"head_back",on:{click:t.back}},[l("img",{attrs:{src:"static/images/dev/back@2x.png",loaded:""},on:{load:t.imgLoad}})]),t._v(" "),l("span",{staticClass:"head_span"},[t._v(t._s(t.seasonName)+"-"+t._s(t.seasonLabel))]),t._v(" "),l("div")]),t._v(" "),l("div",{staticClass:"hd_container"},[l("ul",{staticClass:"hd_tab_wrap"},[t.showTheme?l("li",{staticClass:"hd_tab_item",class:{active:0==t.selectedTabs},on:{click:function(s){t.changeTab(0)}}},[l("span",{staticClass:"tabName"},[t._v("主题解读")])]):t._e(),t._v(" "),l("li",{staticClass:"hd_tab_item",class:{active:1==t.selectedTabs},on:{click:function(s){t.changeTab(1)}}},[l("span",{staticClass:"tabName"},[t._v("单款详解")])]),t._v(" "),l("li",{staticClass:"hd_tab_item",class:{active:2==t.selectedTabs},on:{click:function(s){t.changeTab(2)}}},[l("span",{staticClass:"tabName"},[t._v("品牌搭配")])]),t._v(" "),l("li",{staticClass:"hd_tab_item",class:{active:3==t.selectedTabs},on:{click:function(s){t.changeTab(3)}}},[l("span",{staticClass:"tabName"},[t._v("店铺搭配")])])])]),t._v(" "),l("Scroll",{directives:[{name:"show",rawName:"v-show",value:0==t.selectedTabs,expression:"selectedTabs == 0"}],ref:"themeScroll",staticClass:"themeScroll",attrs:{probeType:3,scrollX:!1,scrollY:!0,pullDown:!1,pullUp:!1}},[l("div",[l("div",{staticClass:"head_img"},[l("mslider",{ref:"slider",attrs:{loop:t.isLoop,"show-dot":!0,"auto-play":!1}},t._l(t.showImgs,function(s,e){return l("div",{key:e,staticClass:"img_wrapper"},[l("img",{attrs:{src:s,alt:"",loaded:""},on:{click:function(s){t.getImg(e)},load:t.imgLoad}})])}))],1),t._v(" "),l("div",{staticClass:"themeRead"},[l("div",{staticClass:"themeName"},[t._v(t._s(t.series.seriesName))]),t._v(" "),l("div",{staticClass:"labelBox"},t._l(t.labelList,function(s,e){return l("div",{key:e,staticClass:"themeLabel"},[t._v(t._s(s))])})),t._v(" "),l("div",{staticClass:"themeHtml",domProps:{innerHTML:t._s(t.series.seriesInterpretation)}})])])]),t._v(" "),1==t.selectedTabs&&0==t.stylesFlag?l("div",[l("van-loading",{attrs:{color:"#00a2ea"}})],1):t._e(),t._v(" "),l("Scroll",{directives:[{name:"show",rawName:"v-show",value:1==t.selectedTabs&&1==t.stylesFlag,expression:"selectedTabs == 1 && stylesFlag == true"}],ref:"styleListScroll",staticClass:"styleListScroll",attrs:{"update-data":[t.stylesList],"refresh-data":[],probeType:3,listenScroll:!0,scrollX:!1,scrollY:!0,autoUpdate:!1},on:{pullingDown:t.styleRefresh,pullingUp:t.styleLoadMore}},[t.stylesList.length>0?l("ul",{staticClass:"con-inner-list clear"},t._l(t.stylesList,function(s,a){return l("li",{key:a,staticClass:"inner-item fl",on:{click:function(e){t.goGoods(s.id)}}},[l("div",{staticClass:"goods-img-box"},[l("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.imgUrl,expression:"item.imgUrl"}],staticClass:"goods-img",attrs:{loaded:""},on:{load:t.imgLoad}}),t._v(" "),l("div",{staticClass:"tipBox"},[1==s.styleFlag?l("img",{staticClass:"key-tip-img",attrs:{src:e("MCze"),alt:""}}):t._e(),t._v(" "),1==s.leaFlag?l("img",{staticClass:"learnIcon",attrs:{src:e("xbbm"),alt:""}}):t._e(),t._v(" "),0==s.videoFlag?l("img",{staticClass:"videoIcon",attrs:{src:e("k88Q"),alt:""}}):t._e()])]),t._v(" "),l("div",{staticClass:"img-name"},[t._v(t._s(s.styleNo))]),t._v(" "),l("div",{staticClass:"goods-stylePrice"},[l("div",{staticClass:"money-symbel"},[t._v("¥"+t._s(s.stylePrice))])])])})):l("div",{staticStyle:{"padding-top":"0.5px"}},[l("noGood")],1)]),t._v(" "),l("Scroll",{directives:[{name:"show",rawName:"v-show",value:2==t.selectedTabs||3==t.selectedTabs,expression:"selectedTabs == 2 || selectedTabs == 3"}],ref:"serieScrollScroll",staticClass:"serieScroll",attrs:{probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!0,pullDown:!1,pullUp:!1}},[l("div",{staticClass:"seriesListBox"},t._l(t.seriesList,function(s,e){return l("div",{key:e,staticClass:"seriesItem",class:{active:s.id==t.seriesId},attrs:{id:s.id},on:{click:function(e){t.clickSeries(s.id)}}},[t._v("\n        "+t._s(s.seriesName)+"\n      ")])}))]),t._v(" "),2==t.selectedTabs&&0==t.collLoadFlag?l("div",[l("van-loading",{attrs:{color:"#00a2ea"}})],1):t._e(),t._v(" "),l("Scroll",{directives:[{name:"show",rawName:"v-show",value:2==t.selectedTabs&&1==t.collLoadFlag,expression:"selectedTabs == 2 && collLoadFlag == true"}],ref:"collBodyScroll",staticClass:"collBody",attrs:{"update-data":[t.collocationList],"refresh-data":[],probeType:3,listenScroll:!0,scrollX:!1,scrollY:!0,autoUpdate:!1},on:{pullingDown:t.collRefresh,pullingUp:t.collLoadMore}},[t.collocationList.length>0?l("div",{staticClass:"brandRecList"},t._l(t.collocationList,function(s,e){return l("div",{key:e,staticClass:"brandItem"},[l("img",{attrs:{src:s.imgUrl,alt:"",loaded:""},on:{click:function(e){t.toStyleDetail(s.id)},load:t.imgLoad}}),t._v(" "),l("div",{staticClass:"collName"},[t._v(t._s(s.collName))]),t._v(" "),l("div",{ref:"collItemScroll"+(e+1),refInFor:!0,staticClass:"coll-item"},[l("div",{staticClass:"inner-list clear"},t._l(s.styleList,function(s,e){return l("div",{key:e,staticClass:"inner-item fl",on:{click:function(e){t.toGoodsDetail(s.id)}}},[l("img",{attrs:{src:s.imgUrl,alt:""}})])}))])])})):l("div",{staticStyle:{"padding-top":"0.5px"}},[l("noGood")],1)]),t._v(" "),3==t.selectedTabs&&0==t.collLoadFlag?l("div",[l("van-loading",{attrs:{color:"#00a2ea"}})],1):t._e(),t._v(" "),l("Scroll",{directives:[{name:"show",rawName:"v-show",value:3==t.selectedTabs&&1==t.collLoadFlag,expression:"selectedTabs == 3 && collLoadFlag == true"}],ref:"beautyScroll",staticClass:"beautyScrollBox",attrs:{"update-data":[t.collocationList],"refresh-data":[],probeType:3,listenScroll:!0,scrollX:!1,scrollY:!0,autoUpdate:!1},on:{pullingDown:t.shopCollRefresh,pullingUp:t.shopCollLoadMore}},[t.collocationList.length>0?l("div",{staticClass:"beautyListBox"},t._l(t.collocationList,function(s,e){return l("div",{key:e,staticClass:"beautyItem",on:{click:function(e){t.toShopCollDetail(s.id)}}},[l("img",{attrs:{src:s.imgUrl,alt:"",loaded:""},on:{load:t.imgLoad}}),t._v(" "),l("div",{staticClass:"comment"},[t._v(t._s(s.collInterpretation))]),t._v(" "),l("div",{staticClass:"reviewerBox"},[s.headPortrait?l("img",{staticClass:"avatar",attrs:{src:s.headPortrait,alt:""}}):l("img",{staticClass:"avatar",attrs:{src:"static/images/default/avatarGirl.png",alt:""}}),t._v(" "),l("span",{staticClass:"name"},[t._v(t._s(s.userName))]),t._v(" "),l("img",{staticClass:"praiseIcon",attrs:{src:"static/images/icon/praise-grey.png",alt:""}}),t._v(" "),l("span",{staticClass:"num"},[t._v(t._s(s.aeNumber))])])])})):l("div",{staticStyle:{"padding-top":"0.5px"}},[l("noGood")],1)]),t._v(" "),t.showPreview?l("imgPreview",{attrs:{imgList:t.showImgs,curIndex:t.curImgIndex,isShowPreview:t.showPreview},on:{func:t.changePreview}}):t._e()],1)},staticRenderFns:[]};var m=e("VU/8")(h,g,!1,function(t){e("u/3a")},"data-v-7317d4a1",null);s.default=m.exports},"u/3a":function(t,s){}});