webpackJsonp([12],{GISH:function(t,s){},QwVS:function(t,s,e){t.exports=e.p+"static/img/shopRec1.0cd5571.png"},YRRz:function(t,s){},jOIu:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("XmAh");var a=e("il3B"),i=e("mvHQ"),o=e.n(i),n=(e("Au9i"),e("Ylnc")),r=e("SQ1s"),l=e("tdg1"),c={name:"topic",components:{},props:{msg:String},data:function(){return{}},methods:{}},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"topic"},t._l(t.query.vResult,function(s,i){return a("div",{key:i,staticClass:"listsBom"},[s.img?a("div",{staticClass:"listsTop"},[a("img",{attrs:{src:e("QwVS")}})]):t._e(),t._v(" "),a("div",{staticClass:"listsBomTop"},[a("div",{staticClass:"listsBomTopTop"},[a("span",{staticClass:"listsBomTopTopSpan"},[t._v(t._s(s.rowId))]),t._v("/"+t._s(t.query.count))]),t._v(" "),a("div",{staticClass:"listsBomTopBom"},[a("img",{staticClass:"listsBomTopTopImg",attrs:{src:"static/images/goodsTest/test35@2x.png",alt:""}}),a("span",{ref:"startTimer",refInFor:!0},[t._v(t._s(t.time))])])]),t._v(" "),a("div",{staticClass:"listsBomIn"},[t._v(t._s(s.content))]),t._v(" "),t._l(s.answers,function(s,e){return a("div",{key:e,staticClass:"listBomBom"},[a("div",{staticClass:"listBomBomList"},[a("div",{staticClass:"listIcon",class:s.instanceId==t.activeId&&e==t.activeIndex?"active":"",on:{click:function(a){t.listIconShow(s.instanceId,e)}}},[t._v(t._s(s.orderNum))]),a("div",[t._v(t._s(s.orderContent))])])])})],2)}))},staticRenderFns:[]};e("VU/8")(c,u,!1,function(t){e("YRRz")},null,null).exports;var d={name:"taskTestTopic",components:{Header:n.a,backHeader:r.a,noGood:l.a},data:function(){return{inHtml:"",dateName:"",query:"",queryArr:[],activeIndex:"",content_index:0,activekey:"",time:"00:00:00",timer:"",seconds:0,isDisable:!1,jiexi:"",goodslist:{title:"",count:"",subTitle:"",vResult:[{answers:[{}],rowId:""}]},model:2,analysis:{},sisDataList:{},BACHID:""}},created:function(){},mounted:function(){this.$route.query.kaotiList?(this.goodslist=this.$route.query.kaotiList,localStorage.goodslist=o()(this.goodslist)):this.goodslist=JSON.parse(localStorage.goodslist),this.seconds=this.goodslist.checkingTime,localStorage.analy||this.start()},activated:function(){localStorage.testFlag&&"true"==localStorage.testFlag?(localStorage.analysisList&&(this.analysis=JSON.parse(localStorage.analysisList)),this.dateName=localStorage.dateName,(localStorage.curTestNum||0===localStorage.curTestNum)&&(this.content_index=Number(localStorage.curTestNum)),this.$route.query.jiexi&&(this.jiexi=this.$route.query.jiexi?this.$route.query.jiexi:"",this.analysisShow(this.analysis))):this.$router.push({path:"/index"})},watch:{$route:function(t,s){}},methods:{back:function(){var t=this;1==this.$route.query.of?a.a.confirm({title:"温馨提示",message:"现在是答题阶段<br/>退出将自动提交所做答案！"}).then(function(){clearTimeout(t.timer),localStorage.removeItem("curTestNum"),t.submit(1)}).catch(function(){}):(localStorage.testFlag="true",setTimeout(function(){localStorage.removeItem("testFlag")},3e3),clearTimeout(this.timer),localStorage.removeItem("curTestNum"),this.$router.push({path:"/taskReport"}))},listIconShow:function(t,s,e){this.$set(this.goodslist.vResult[e],"ID",t.orderNum),this.queryArr.unshift(t);var a={},i=this.queryArr.reduce(function(t,s){return s.answer=s.orderNum,s.useTime=100,!a[s.instanceId]&&(a[s.instanceId]=t.push(s)),t},[]);this.queryArr=i,this.activeIndex=s,this.activekey=t,this.$set(this.queryArr[0],"ageNUM",t.orderNum),this.$set(this.queryArr[0],"egaID",t.instanceId)},startTesting:function(){this.content_index>0&&(this.content_index=this.content_index-1,localStorage.curTestNum=this.content_index),this.jiexi&&this.analysisShow(this.analysis)},endTesting:function(t){this.content_index<this.goodslist.vResult.length-1&&(this.content_index=this.content_index+1,localStorage.curTestNum=this.content_index),this.jiexi&&this.analysisShow(this.analysis)},submit:function(t){var s=this;if("3"==localStorage.bsType&&(localStorage.atts=1),t){if(this.isDisable=!0,this.queryArr!=[])for(var e=0;e<this.queryArr.length;e++)this.queryArr[e].useTime=parseInt((this.goodslist.checkingTime-this.seconds)/this.queryArr.length);var i=this,o={userName:localStorage.userName,taskId:localStorage.taskId,answers:this.queryArr,brandId:localStorage.brandId,bsCode:localStorage.brandIdGDY,issuanceNumber:localStorage.issuanceNumber,orgId:localStorage.orgId,userId:localStorage.userId},n=this.GLOBAL.g_paramJson(o);i.$axios.post("/task/task/submitAnswer",n).then(function(t){s.isDisable=!1,0==t.data.head.status?(localStorage.curBachId=t.data.body.bachId,clearTimeout(s.timer),localStorage.removeItem("curTestNum"),i.$router.push({path:"./taskReport",query:{to:1,bachId:t.data.body.bachId,stamp:(new Date).getTime()}})):i.$toast(t.data.head.msg)}).catch(function(t){console.log(t)})}else a.a.confirm({title:"温馨提示",message:"确认要提交吗?"}).then(function(){if(s.isDisable=!0,s.queryArr!=[])for(var t=0;t<s.queryArr.length;t++)s.queryArr[t].useTime=parseInt((s.goodslist.checkingTime-s.seconds)/s.queryArr.length);var e=s,a={userName:localStorage.userName,taskId:localStorage.taskId,answers:s.queryArr,brandId:localStorage.brandId,bsCode:localStorage.brandIdGDY,issuanceNumber:localStorage.issuanceNumber,orgId:localStorage.orgId,userId:localStorage.userId},i=s.GLOBAL.g_paramJson(a);e.$axios.post("/task/task/submitAnswer",i).then(function(t){s.isDisable=!1,0==t.data.head.status?(localStorage.curBachId=t.data.body.bachId,clearTimeout(s.timer),localStorage.removeItem("curTestNum"),e.$router.push({path:"./taskReport",query:{to:1,bachId:t.data.body.bachId,stamp:(new Date).getTime()}})):e.$toast(t.data.head.msg)}).catch(function(t){console.log(t)})}).catch(function(){s.$toast("已取消提交")})},start:function(){var t=this;this.timer=setInterval(function(){t.seconds&&(t.seconds=t.seconds-1);var s=parseInt(t.seconds/60/60),e=parseInt(t.seconds/60%60),a=parseInt(t.seconds%60);s=s>9?s:"0"+s,e=e>9?e:"0"+e,a=a>9?a:"0"+a,t.time=s+":"+e+":"+a,0==t.seconds&&t.submit(1)},1e3)},analysisShow:function(t){var s=this,e={taskId:localStorage.taskId,instanceId:t.list[this.content_index].instanceId,userId:localStorage.userId,issuanceNumber:localStorage.issuanceNumber,bachId:localStorage.curBachId},a=this.GLOBAL.g_paramJson(e);s.$axios.post("/task/task/getInstanceInfo",a).then(function(t){0==t.data.head.status?s.sisDataList=t.data.body:s.$toast(t.data.head.msg)}).catch(function(t){console.log(t)})},catalogShow:function(){1==this.jiexi?this.$router.push({path:"./taskTopicCatalog",query:{BACHID:this.BACHID,ana:this.analysis,panams:this.queryArr,jiexi:1}}):this.$router.push({path:"./taskTopicCatalog",query:{item:this.goodslist,panams:this.queryArr}})}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"taskTestTopic"}},[e("div",{staticClass:"headBox"},[e("backHeader",{attrs:{title:t.dateName}},[e("span",{staticClass:"head-class f-l",attrs:{slot:"left"},on:{click:t.back},slot:"left"},[t._t("default",[e("img",{staticClass:"back-icon",attrs:{src:"static/images/dev/back@2x.png",alt:""}})])],2),t._v(" "),e("span",{staticClass:"head-class place-label",attrs:{slot:"right"},slot:"right"})])],1),t._v(" "),e("Scroll",{ref:"goodsTestTopicScroll",staticClass:"goodsTestTopicCon",attrs:{probeType:3,listenScroll:!0,autoUpdate:!1,scrollX:!1,scrollY:!0,pullDown:!1,pullUp:!1}},[e("div",{staticClass:"bodys"},[e("div",{staticClass:"listsBom"},[e("div",{staticClass:"listsBomTop"},[e("div",{staticClass:"listsBomTopTop"},[e("span",{staticClass:"listsBomTopTopSpan"},[t._v(t._s(t.content_index+1))]),t._v("/"+t._s(t.goodslist.count?t.goodslist.count:t.goodslist.questionCount))]),t._v(" "),1!=t.jiexi?e("div",{staticClass:"listsBomTopBom"},[e("img",{staticClass:"listsBomTopTopImg",attrs:{src:"static/images/goodsTest/test35@2x.png",alt:""}}),e("span",{ref:"startTimer"},[t._v(t._s(t.time))])]):t._e()]),t._v(" "),e("div",{staticClass:"listsBomIn",domProps:{innerHTML:t._s(t.goodslist.vResult[t.content_index].subTitle?t.goodslist.vResult[t.content_index].subTitle:t.goodslist.vResult[t.content_index].content)}}),t._v(" "),t._l(t.goodslist.vResult[t.content_index].option?t.goodslist.vResult[t.content_index].option:t.goodslist.vResult[t.content_index].answers,function(s,a){return e("div",{key:a,staticClass:"listBomBom"},[1!=t.jiexi?e("div",{staticClass:"listBomBomList",on:{click:function(e){t.listIconShow(s,a,t.content_index)}}},[e("div",{staticClass:"listIcon",class:t.goodslist.vResult[t.content_index].ageNUM==s.orderNum&&t.goodslist.vResult[t.content_index].egaID==s.instanceId||t.goodslist.vResult[t.content_index].ID==s.orderNum?"active":""},[t._v(t._s(s.orderNum))]),e("div",{staticClass:"listContent"},[t._v(t._s(s.title?s.title:s.orderContent))])]):e("div",{staticClass:"listBomBomList"},[e("div",{staticClass:"listIcon",class:t.sisDataList.correctAnswer==t.sisDataList.usertAnswer==s.orderNum?"green":t.sisDataList.correctAnswer==s.orderNum?"green":t.sisDataList.userAnswer==s.orderNum?"red":""},[t._v(t._s(s.orderNum))]),e("div",{staticClass:"listContent"},[t._v(t._s(s.orderContent))])])])})],2)])]),t._v(" "),e("div",{staticClass:"footer"},[t.content_index?e("van-button",{staticClass:"startBtn up",attrs:{type:"info"},on:{click:function(s){t.startTesting()}}},[t._v("上一题")]):e("van-button",{staticClass:"startBtn up",attrs:{disabled:"",type:"info"}},[t._v("上一题")]),t._v(" "),0!=t.queryArr.length?e("van-button",{staticClass:"startBtn in",on:{click:function(s){t.catalogShow()}}},[t._v("目 录("+t._s(t.queryArr.length)+"/"+t._s(t.goodslist.count?t.goodslist.count:t.goodslist.questionCount)+")")]):e("van-button",{staticClass:"startBtn in",on:{click:function(s){t.catalogShow()}}},[t._v("目 录")]),t._v(" "),(t.queryArr.length>0?t.queryArr.length:0)==t.goodslist.vResult.length&&1!=t.jiexi?e("van-button",{staticClass:"startBtn down",attrs:{type:"info",disabled:t.isDisable},on:{click:function(s){t.submit()}}},[t._v("提交")]):t.content_index<t.goodslist.vResult.length-1?e("van-button",{staticClass:"startBtn down",attrs:{type:"info"},on:{click:function(s){t.endTesting(1)}}},[t._v("下一题")]):(t.queryArr.length>0?t.queryArr.length:0)<t.goodslist.vResult.length?e("van-button",{staticClass:"startBtn down",attrs:{disabled:"",type:"info"}},[t._v("下一题")]):t._e()],1)],1)},staticRenderFns:[]};var g=e("VU/8")(d,h,!1,function(t){e("GISH")},"data-v-2b045b8a",null);s.default=g.exports}});