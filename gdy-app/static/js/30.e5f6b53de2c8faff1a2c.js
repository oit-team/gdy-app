webpackJsonp([30],{J2Up:function(s,t){},kJuL:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("LOkV"),a=e("roHx"),l=e("mZzF"),o={name:"goodsDetail",data:function(){return{title:"商品",styleId:"",styleInfo:{},isLoop:!0,gateway:1,hasVideo:!1,isVideo:!1,tempPath:"//vjs.zencdn.net/v/oceans.mp4"}},components:{mslider:a.a,mPopup:l.a},methods:{chooseModel:function(s){1==s?(this.isVideo=!0,this.myPlayer.play()):(this.isVideo=!1,this.myPlayer.pause(),this.$refs.slider.update())},gatewayTo:function(s){var t;(t=1==s?0:2==s?-this.$refs.sellpoint_title.offsetTop+this.$refs.header.offsetHeight:3==s?-this.$refs.coll_title.offsetTop+this.$refs.header.offsetHeight:-this.$refs.match_title.offsetTop+this.$refs.header.offsetHeight)<this.pageScroll.maxScrollY&&(t=this.pageScroll.maxScrollY),this.pageScroll.scrollTo(0,t,500)},sellShow:function(){this.$refs.sell_pop.show()},basicShow:function(){this.$refs.basic_pop.show()},loadedImg:function(){this.initOrLoadScrollView()},toColl:function(s){this.hasVideo&&this.myPlayer.dispose(),this.$router.push({path:"/styleDetail",query:{collId:s,stemp:(new Date).getTime()}})},back:function(){this.hasVideo&&this.myPlayer.dispose(),this.$router.go(-1)},toStyle:function(s){this.hasVideo&&this.myPlayer.dispose();var t={path:"/goodsDetail",query:{styleId:s,stamp:(new Date).getTime()}};this.$router.push(t)},initOrLoadScrollView:function(){var s=this;s.$nextTick(function(){s.pageScroll?s.pageScroll.refresh():(s.pageScroll=new s.$BScroll(s.$refs.page,{scrollX:!1,scrollY:!0,click:!0,probeType:3,preventDefaultException:{className:/(^|\s)bs_prevent(\s|$)/}}),s.pageScroll.on("scroll",function(t){var e=s.$refs.sellpoint_title.offsetTop-s.$refs.header.offsetHeight,i=s.$refs.coll_title.offsetTop-s.$refs.header.offsetHeight,a=s.$refs.match_title.offsetTop-s.$refs.header.offsetHeight;Math.abs(t.y)>=0&&Math.abs(t.y)<e?s.gateway=1:Math.abs(t.y)>=e&&Math.abs(t.y)<i?s.gateway=2:Math.abs(t.y)>=i&&Math.abs(t.y)<a?s.gateway=3:s.gateway=4,Math.abs(t.y)-80<=0?s.$refs.header.style.opacity=0:Math.abs(t.y)-80>0&&(s.$refs.header.style.opacity=(Math.abs(t.y)-80)/180)})),s.collsScroll?s.collsScroll.refresh():s.collsScroll=new s.$BScroll(s.$refs.collsScroll,{scrollX:!0,scrollY:!1})})},getStyleInfo:function(s){var t=this;t.$axios.get("/api/style/"+s).then(function(s){console.log("商品详情页数据为",s.data);var e=s.data;"200"==e.code&&(e.data.styleImgList=e.data.imgUrls.split(","),null!=e.data.styleLabel&&(e.data.styleLabel=e.data.styleLabel.split(",")),t.styleInfo=e.data,t.hasVideo=!!t.styleInfo.styleVideo,t.isVideo=!!t.styleInfo.styleVideo,t.title=t.styleInfo.styleNo,t.isLoop=t.styleInfo.styleImgList.length>1),t.$refs.slider.update(),t.initOrLoadScrollView()}).catch(function(s){console.log(s)})},initVideo:function(){document.getElementById("video_wrapper").innerHTML='<video id="myVideo" class="video-js vjs-big-play-centered" controlslist="nodownload noremote noremoteplayback" oncontextmenu = "return false"></video>',document.getElementById("myVideo").setAttribute("disablePictureInPicture","true");var s={controls:!0,autoplay:"false",preload:"metadata",width:this.$refs.video.scrollHeight+"px",height:this.$refs.video.scrollHeight+"px",controlBar:{fullscreenToggle:!1,pictureInPictureToggle:!1,textTrackSettings:!1},sources:[{src:this.styleInfo.styleVideo,type:"video/mp4"}],nativeControlsForTouch:!0};this.myPlayer=this.$video("myVideo",s),this.myPlayer.play()},htmlToStr:function(s){return s?s.split("<br>").join(" "):""}},watch:{styleId:function(s,t){i.a.loading(),this.getStyleInfo(s)},hasVideo:function(s){if(s){var t=this;t.$nextTick(function(){t.isVideo=!0,t.initVideo()})}}},mounted:function(){this.styleId=this.$route.query.styleId},activated:function(){var s=this;console.log(s.$rc),s.$nextTick(function(){!s.$rc.isGo&&s.hasVideo&&(s.isVideo=!0,setTimeout(s.initVideo(),300))})},updated:function(){}},n={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"main",on:{touchmove:function(s){s.preventDefault()}}},[e("div",{staticClass:"header"},[e("div",{staticClass:"header_one"},[e("div",{on:{click:s.back}},[e("img",{attrs:{src:"static/images/dev/back_white@2x.png"}})])]),s._v(" "),e("div",{ref:"header",staticClass:"header_two"},[e("div",{staticClass:"back_wrapper",on:{click:s.back}},[e("img",{attrs:{src:"static/images/dev/back@2x.png"}})]),s._v(" "),e("div",{staticClass:"gateway_wrapper"},[e("li",{class:{selected:1==s.gateway},on:{click:function(t){s.gatewayTo(1)}}},[s._v("详情")]),s._v(" "),e("li",{class:{selected:2==s.gateway},on:{click:function(t){s.gatewayTo(2)}}},[s._v("卖点")]),s._v(" "),e("li",{class:{selected:3==s.gateway},on:{click:function(t){s.gatewayTo(3)}}},[s._v("搭配")]),s._v(" "),e("li",{class:{selected:4==s.gateway},on:{click:function(t){s.gatewayTo(4)}}},[s._v("推荐")])])])]),s._v(" "),e("div",{ref:"page",staticClass:"page"},[e("div",{staticClass:"page_scroll_content"},[e("div",{staticClass:"head_img"},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.isVideo&&s.hasVideo,expression:"isVideo&&hasVideo"}],ref:"video",staticClass:"good_video",attrs:{id:"video_wrapper"}}),s._v(" "),e("mslider",{directives:[{name:"show",rawName:"v-show",value:!s.isVideo,expression:"!isVideo"}],ref:"slider",attrs:{loop:s.isLoop,"auto-play":!1}},s._l(s.styleInfo.styleImgList,function(s,t){return e("div",{key:t,staticClass:"img_wrapper"},[e("img",{attrs:{src:s}})])})),s._v(" "),s.hasVideo?e("div",{staticClass:"video_control"},[e("div",{class:{video_select:s.isVideo},on:{click:function(t){s.chooseModel(1)}}},[s._v("视频")]),s._v(" "),e("div"),s._v(" "),e("div",{class:{video_select:!s.isVideo},on:{click:function(t){s.chooseModel(0)}}},[s._v("图片")])]):s._e()],1),s._v(" "),e("div",{staticClass:"goods_container"},[e("h4",{staticClass:"goods_name"},[s._v(s._s(s.styleInfo.styleName))]),s._v(" "),e("div",{staticClass:"goods_describe",on:{click:s.sellShow}},[e("span",[s._v(s._s(s.htmlToStr(s.styleInfo.wearSellingPoint)))]),e("img",{attrs:{src:"static/images/icon/right_blue@2x.png"}})]),s._v(" "),e("div",{staticClass:"goods_wrap"},[e("div",{staticClass:"goods_price"},[s._v("¥"),e("strong",[s._v(s._s(s.styleInfo.stylePrice))])]),s._v(" "),e("div",[e("span",[s._v("推荐: ")]),s._v(" "),s._l([1,2,3,4,5],function(t,i){return e("span",{key:i,staticClass:"star",class:{highlighted:i<s.styleInfo.recommendationLevel}})})],2)])]),s._v(" "),e("div",{staticClass:"spacing"}),s._v(" "),e("div",{staticClass:"title_wrap"},[s._m(0),s._v(" "),e("div",{staticClass:"title_btn",on:{click:s.basicShow}},[s._v("详情")])]),s._v(" "),e("div",{staticClass:"spacing"}),s._v(" "),e("div",{staticClass:"wrap"},[e("div",{staticClass:"basic_info"},[e("div",{staticClass:"row"},[e("div",{staticClass:"left"},[e("li",[e("span",{staticClass:"name"},[s._v("款号")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.styleNo))])]),s._v(" "),e("li",[e("span",{staticClass:"name"},[s._v("波段")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.bandName))])]),s._v(" "),e("li",[e("span",{staticClass:"name"},[s._v("材质")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.styleFabric))])]),s._v(" "),e("li",[e("span",{staticClass:"name"},[s._v("廓形")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.styleFlowerPattern))])])]),s._v(" "),e("div",{staticClass:"right"},[e("li",[e("span",{staticClass:"name"},[s._v("系列")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.seriesName))])]),s._v(" "),e("li",[e("span",{staticClass:"name"},[s._v("风格")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.styleInfo))])]),s._v(" "),e("li",[e("span",{staticClass:"name"},[s._v("颜色")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.styleColor))])]),s._v(" "),e("li",[e("span",{staticClass:"name"},[s._v("类别")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.styleInfo.styleCategory))])])])]),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"center"},[e("span",{staticClass:"name"},[s._v("洗涤")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.htmlToStr(s.styleInfo.washMaintenance)))])])]),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"center"},[e("span",{staticClass:"name"},[s._v("标签")]),s._v(" "),e("span",{staticClass:"value"},s._l(s.styleInfo.styleLabel,function(t,i){return e("span",{key:i,staticClass:"style_label"},[s._v("\n                  "+s._s(t)+"\n                ")])}))])])])]),s._v(" "),e("div",{staticClass:"spacing"}),s._v(" "),e("div",{ref:"sellpoint_title",staticClass:"title_wrap"},[s._m(1),s._v(" "),e("div",{staticClass:"title_btn",on:{click:s.sellShow}},[s._v("详情")])]),s._v(" "),e("div",{staticClass:"spacing"}),s._v(" "),e("div",{staticClass:"wrap"},[e("div",{staticClass:"basic_info"},[e("div",{staticClass:"row"},[e("div",{staticClass:"center",staticStyle:{margin:"0"}},[e("span",{staticClass:"name"},[s._v("面料卖点")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.htmlToStr(s.styleInfo.sellingPointFabric)))])])]),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"center"},[e("span",{staticClass:"name"},[s._v("设计卖点")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.htmlToStr(s.styleInfo.designSellingPoint)))])])]),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"center"},[e("span",{staticClass:"name"},[s._v("穿着卖点")]),s._v(" "),e("span",{staticClass:"value"},[s._v(s._s(s.htmlToStr(s.styleInfo.wearSellingPoint)))])])])])]),s._v(" "),e("div",{staticClass:"spacing"}),s._v(" "),e("div",{ref:"coll_title",staticClass:"title_wrap"},[s._m(2)]),s._v(" "),e("div",{staticClass:"spacing"}),s._v(" "),e("div",{staticClass:"wrap"},[e("div",{ref:"collsScroll",staticClass:"scrollWrapper"},[e("div",{staticClass:"collocation"},s._l(s.styleInfo.collList,function(t,i){return e("div",{key:i,staticClass:"col_img_a"},[e("img",{attrs:{height:"100%",src:t.imgUrl,alt:""},on:{click:function(e){s.toColl(t.id)},load:function(t){s.loadedImg()}}})])}))])]),s._v(" "),e("div",{staticClass:"spacing"}),s._v(" "),e("div",{ref:"match_title",staticClass:"title_wrap"},[s._m(3)]),s._v(" "),e("div",{staticClass:"wrap",staticStyle:{background:"#F8F8F8"}},[e("div",[e("ul",{staticClass:"recommended"},s._l(s.styleInfo.styleList,function(t,i){return e("li",{key:i},[e("div",{staticClass:"rec_item",on:{click:function(e){s.toStyle(t.id)}}},[e("img",{attrs:{width:"100%",src:t.imgUrl,alt:""},on:{load:function(t){s.loadedImg()}}}),s._v(" "),e("p",{staticClass:"name"},[s._v(s._s(t.styleName))]),s._v(" "),e("p",{staticClass:"rec_bottom"},[e("span",{staticClass:"price"},[e("i",{},[s._v("¥")]),s._v(" "+s._s(t.stylePrice))])])])])}))])])])]),s._v(" "),e("m-popup",{ref:"basic_pop",attrs:{title:"商品基础信息"}},[e("ul",[e("li",[e("span",[s._v("款号")]),e("span",[s._v(s._s(s.styleInfo.styleNo))])]),s._v(" "),e("li",[e("span",[s._v("系列")]),e("span",[s._v(s._s(s.styleInfo.seriesName))])]),s._v(" "),e("li",[e("span",[s._v("波段")]),e("span",[s._v(s._s(s.styleInfo.bandName))])]),s._v(" "),e("li",[e("span",[s._v("风格")]),e("span",[s._v(s._s(s.styleInfo.styleInfo))])]),s._v(" "),e("li",[e("span",[s._v("材质")]),e("span",[s._v(s._s(s.styleInfo.styleFabric))])]),s._v(" "),e("li",[e("span",[s._v("颜色")]),e("span",[s._v(s._s(s.styleInfo.styleColor))])]),s._v(" "),e("li",[e("span",[s._v("廓形")]),e("span",[s._v(s._s(s.styleInfo.styleFlowerPattern))])]),s._v(" "),e("li",[e("span",[s._v("类别")]),e("span",[s._v(s._s(s.styleInfo.styleCategory))])]),s._v(" "),e("li",[e("span",[s._v("保养")]),e("span",{domProps:{innerHTML:s._s(s.styleInfo.washMaintenance)}})])])]),s._v(" "),e("m-popup",{ref:"sell_pop",attrs:{title:"商品核心卖点"}},[e("ul",[e("li",[e("span",[s._v("面料卖点")]),e("span",{staticClass:"bs_prevent",domProps:{innerHTML:s._s(s.styleInfo.sellingPointFabric)}})]),s._v(" "),e("li",[e("span",[s._v("设计卖点")]),e("span",{staticClass:"bs_prevent",domProps:{innerHTML:s._s(s.styleInfo.designSellingPoint)}})]),s._v(" "),e("li",[e("span",[s._v("穿着卖点")]),e("span",{staticClass:"bs_prevent",domProps:{innerHTML:s._s(s.styleInfo.wearSellingPoint)}})])])])],1)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",[t("div",{staticClass:"title"},[t("img",{attrs:{src:"static/images/icon/right_white@2x.png"}}),t("div",[this._v("商品基础信息")])]),this._v(" "),t("div",{staticClass:"subtitle"},[this._v("Commodity basic")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",[t("div",{staticClass:"title"},[t("img",{attrs:{src:"static/images/icon/right_white@2x.png"}}),t("div",[this._v("商品核心卖点")])]),this._v(" "),t("div",{staticClass:"subtitle"},[this._v("Commodity core selling point")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",[t("div",{staticClass:"title"},[t("img",{attrs:{src:"static/images/icon/right_white@2x.png"}}),t("div",[this._v("试试这样搭")])]),this._v(" "),t("div",{staticClass:"subtitle"},[this._v("Try this way")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",[t("div",{staticClass:"title"},[t("img",{attrs:{src:"static/images/icon/right_white@2x.png"}}),t("div",[this._v("搭配单品推荐")])]),this._v(" "),t("div",{staticClass:"subtitle"},[this._v("Matching single product recommendation")])])}]};var c=e("VU/8")(o,n,!1,function(s){e("J2Up")},"data-v-625a70b4",null);t.default=c.exports}});