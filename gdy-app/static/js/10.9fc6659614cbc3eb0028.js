webpackJsonp([10],{BlUd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("nn5O"),s=i("tdg1"),a=i("4duW"),o={name:"keyStyle",components:{horizonScroll:l.a,noGood:s.a,loadAll:a.a},data:function(){return{keyStyleData:[],bandId:null,currentPage:1,pageSize:12,categoryName:null,seasonName:null,bandName:null,activeId:null,keyScrollRefresh:!1,styleListFlag:!1,picCount:0,keyStyleTotal:null,bigList:[]}},created:function(){console.log(this.$route.query),this.bigList=this.$route.query.bigList,this.cateList=this.$route.query.cateList,this.activeId=this.$route.query.cateId,this.bandId=this.$route.query.bandId,this.categoryName=this.$route.query.categoryname,this.bandName=this.$route.query.bandName,this.seasonName=this.$route.query.seasonName,this.getKeyStyleList()},mounted:function(){var t=this;setTimeout(function(){var e=document.querySelector(".scrollUl .active");t.$refs.kindTopScroll.scrollToElement(e,500);var i=document.querySelector(".kindTitUl .active");t.$refs.kindTitScroll.scrollToElement(i,500)},200)},updated:function(){},watch:{picCount:function(t){document.querySelectorAll("img[loaded]").length<=t+6&&this.$refs.keyStyleScroll.refresh()},$route:function(t,e){if("/goodsDetail2"==e.path)for(var i=0;i<this.keyStyleData.length;i++)this.keyStyleData[i].id==e.query.styleId&&(this.keyStyleData[i].leaFlag="0")},activeId:function(t,e){this.styleListFlag=!1}},methods:{back:function(){this.$router.go(-1)},imgLoad:function(){this.picCount++},getKeyStyleList:function(){var t=this,e=localStorage.brandId,i=localStorage.userId,l={brandId:e,bandId:this.bandId,categoryName:this.categoryName,userId:i,currentPage:this.currentPage,pageSize:this.pageSize};t.$axios.post("/api/series/getStyleList",l).then(function(e){var i=e.data;t.styleListFlag=!0,"200"==i.code?(console.log("重点款页面获取的数据为,",i),1==t.currentPage?t.keyStyleData=e.data.data.list:t.keyStyleData=t.keyStyleData.concat(e.data.data.list),t.keyStyleTotal=i.data.total):t.$toast(i.data)}).catch(function(e){t.$toast(e),console.log(e)})},keyStyleRefresh:function(){this.currentPage=1,this.getKeyStyleList()},keyStyleLoadMore:function(){this.keyStyleData.length<this.keyStyleTotal?(this.currentPage++,this.getKeyStyleList()):this.$refs.keyStyleScroll.update(!0)},clickItem:function(t,e){this.activeId!=t?(this.keyStyleData=[],this.styleListFlag=!1,this.activeId=t,this.categoryName=e,this.currentPage=1,this.getKeyStyleList(),this.activeId<t?this.$refs.kindTopScroll.scrollToElement(event.currentTarget,500):event.currentTarget.previousElementSibling?this.$refs.kindTopScroll.scrollToElement(event.currentTarget.previousElementSibling,500):this.$refs.kindTopScroll.scrollToElement(event.currentTarget,500)):this.activeId=t},clickKindItem:function(t){var e=this;console.log(t),this.keyStyleData=[],this.styleListFlag=!1;for(var i=0;i<this.bigList.length;i++)console.log(this.bandName,t),t==this.bigList[i].bandName&&(this.cateList=this.bigList[i].result,this.bandName=t,this.activeId=this.cateList[0].id,this.bandId=this.cateList[0].bandId,this.categoryName=this.cateList[0].seriesName,console.log(this.cateList),this.getKeyStyleList());setTimeout(function(){var t=document.querySelector(".scrollUl .active");e.$refs.kindTopScroll.scrollToElement(t,500)},200)},goGoodDetail:function(t){this.$router.push({path:"/goodsDetail2",query:{styleId:t,stamp:(new Date).getTime()}})}}},n={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{attrs:{id:"keyStylePage"},on:{touchmove:function(t){t.preventDefault()}}},[l("div",{staticClass:"header"},[l("div",{staticClass:"head_back",on:{click:t.back}},[l("img",{attrs:{src:"static/images/dev/back@2x.png"}})]),t._v(" "),l("span",{staticClass:"head_span"},[t._v(t._s(t.seasonName))]),t._v(" "),l("div")]),t._v(" "),l("Scroll",{ref:"kindTitScroll",staticClass:"kindTitBox",attrs:{probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!0,pullDown:!1,pullUp:!1}},[l("ul",{staticClass:"kindTitUl"},t._l(t.bigList,function(e,i){return l("li",{key:i,staticClass:"kindTitItem",class:[e.bandName==t.bandName?"active":""],on:{click:function(i){t.clickKindItem(e.bandName)}}},[l("span",{staticClass:"styleName"},[t._v(t._s(e.bandName))])])}))]),t._v(" "),l("Scroll",{ref:"kindTopScroll",staticClass:"kindTopBox",attrs:{listenScroll:!0,probeType:3,scrollX:!0,scrollY:!1,autoUpdate:!0,pullDown:!1,pullUp:!1}},[l("ul",{staticClass:"scrollUl"},t._l(t.cateList,function(e,i){return l("li",{key:i,staticClass:"kindItem",class:[e.id==t.activeId?"active":""],on:{click:function(i){t.clickItem(e.id,e.seriesName)}}},[l("span",{staticClass:"styleName"},[t._v(t._s(e.seriesName))])])}))]),t._v(" "),t.styleListFlag?t._e():l("div",[l("van-loading",{attrs:{color:"#00a2ea"}})],1),t._v(" "),t.styleListFlag?l("Scroll",{ref:"keyStyleScroll",staticClass:"keyStyleCon",attrs:{"update-data":[t.keyStyleData],"refresh-data":[],probeType:3,listenScroll:!0,autoUpdate:!1,scrollX:!1,scrollY:!0},on:{pullingDown:t.keyStyleRefresh,pullingUp:t.keyStyleLoadMore}},[l("div",[t.keyStyleData.length>0?l("div",{staticClass:"keyStyleDataBox "},[l("div",{staticClass:"clear"},t._l(t.keyStyleData,function(e,s){return l("div",{key:s,staticClass:"keyStyle-item fl",on:{click:function(i){t.goGoodDetail(e.id)}}},[l("div",{staticClass:"goods-img-box"},[l("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgUrl,expression:"item.imgUrl"}],staticClass:"goods-img",attrs:{alt:"",loaded:""},on:{load:t.imgLoad}}),t._v(" "),l("div",{staticClass:"tipBox"},[1==e.styleFlag?l("img",{staticClass:"key-tip-img",attrs:{src:i("MCze"),alt:""}}):t._e(),t._v(" "),1==e.leaFlag?l("img",{staticClass:"learnIcon",attrs:{src:i("xbbm"),alt:""}}):t._e(),t._v(" "),0==e.videoFlag?l("img",{staticClass:"videoIcon",attrs:{src:i("k88Q"),alt:""}}):t._e()])]),t._v(" "),l("div",{staticClass:"goods-num"},[t._v(t._s(e.styleNo))]),t._v(" "),l("div",{staticClass:"goods-stylePrice"},[l("div",{staticClass:"money-symbel"},[t._v("¥"+t._s(e.stylePrice))])])])})),t._v(" "),l("div",{staticStyle:{height:"0.5px",background:"transprant"}})]):l("div",{staticStyle:{"padding-top":"0.5px"}},[l("noGood")],1)])]):t._e()],1)},staticRenderFns:[]};var r=i("VU/8")(o,n,!1,function(t){i("Siy2")},"data-v-c11a31da",null);e.default=r.exports},Oyjk:function(t,e){},Siy2:function(t,e){},nn5O:function(t,e,i){"use strict";var l={name:"",props:["horizonScroll","types","activtedVal","renderName"],data:function(){return{activeVal:null,length:null,newArr:[]}},created:function(){this.activeVal=this.activtedVal,this.length=this.horizonScroll.length;for(var t=0;t<this.horizonScroll.length;t++)this.newArr.push(this.horizonScroll[t][this.types]);this.ininListScroll()},mounted:function(){},methods:{ininListScroll:function(){var t=this;this.$nextTick(function(){if(t.horizonScrollList)t.horizonScrollList.refresh();else{t.horizonScrollList=new t.$BScroll(t.$refs.horizonScrollList,{scrollX:!0,scrollY:!1,click:!0,bounce:!1,probeType:3});var e=document.querySelector(".scrollUl .active");console.log(e,"当前选中的元素"),t.horizonScrollList.scrollToElement(e,0,0)}})},clickItem:function(t,e){if(this.activeVal!=t){var i=this.newArr.indexOf(t);this.newArr.indexOf(this.activeVal)<i?this.horizonScrollList.scrollToElement(event.currentTarget,500):event.currentTarget.previousElementSibling?this.horizonScrollList.scrollToElement(event.currentTarget.previousElementSibling,500):this.horizonScrollList.scrollToElement(event.currentTarget,500),this.activeVal=t,this.$emit("func",e)}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"horizonScroll"}},[i("div",{ref:"horizonScrollList",staticClass:"scrollBox"},[i("ul",{staticClass:"scrollUl"},t._l(t.horizonScroll,function(e,l){return i("li",{key:l,staticClass:"hori-scroll-item",class:[e[t.types]==t.activeVal?"active":""],on:{click:function(i){t.clickItem(e[t.types],e[t.renderName])}}},[t._v("\n        "+t._s(e[t.renderName])+"\n      ")])}))])])},staticRenderFns:[]};var a=i("VU/8")(l,s,!1,function(t){i("Oyjk")},"data-v-67f51253",null);e.a=a.exports}});