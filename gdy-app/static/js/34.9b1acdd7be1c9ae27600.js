webpackJsonp([34],{"J/89":function(t,e){},sst1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("XmAh");var a=s("il3B"),c=s("SQ1s"),o=s("Ylnc"),i=s("tdg1"),l={name:"checkRecord",components:{backHeader:c.a,Header:o.a,noGood:i.a},data:function(){return{page:1,pageSize:12,checkRecordList:[],recordTotal:0,selectAll:!1,selectedList:[],score:null,dateName:"",info:null}},created:function(){},mounted:function(){},activated:function(){localStorage.classInfo&&(this.info=JSON.parse(localStorage.classInfo)),this.dateName=localStorage.dateName,this.score=localStorage.score,this.courseId=localStorage.courseId,this.checkRecordList=[],this.selectedList=[],this.page=1,this.getRecordList()},methods:{back:function(){"1"==localStorage.bsType?this.$router.push({path:"/classList"}):"2"==localStorage.bsType&&this.$router.push({path:"/taskGoodsTask"})},getRecordList:function(){var t=this,e=null;"1"==localStorage.bsType&&(e={userId:localStorage.userId,bsCode:localStorage.brandIdGDY,scopId:this.courseId,page:this.page,pageSize:this.pageSize,bsType:1,taskType:2,bsTypeSec:null}),"2"==localStorage.bsType&&(e={userId:localStorage.userId,taskType:1,bsCode:localStorage.brandIdGDY,bsType:localStorage.bsType,scopId:localStorage.dateId,bsTypeSec:"",page:this.page,pageSize:this.pageSize});var s=this.GLOBAL.g_paramJson(e);t.$axios.post("/task/task/getTaskList",s).then(function(e){"0"==e.data.head.status?(t.recordTotal=e.data.body.count,t.score=e.data.body.maxFraction,1==t.page?(t.selectedList=[],t.selectAll=!1,t.checkRecordList=e.data.body.vResult):t.checkRecordList=t.checkRecordList.concat(e.data.body.vResult)):t.$toast(e.data.head.msg)}).catch(function(t){console.log(t)})},toCheckTask:function(t){localStorage.taskId=t.taskId,localStorage.issuanceNumber=t.issuanceNumber,localStorage.curBachId=t.bachId,this.$router.push({path:"./taskReport",query:{item:t,bachId:t.bachId,stamp:(new Date).getTime()}})},checkedSelect:function(t){if(t.checked){this.$set(t,"checked",!1);for(var e=0;e<this.selectedList.length;e++)this.selectedList[e].taskId==t.taskId&&this.selectedList.splice(e,1)}else{var s={taskId:"",issuanceNumber:""};s.taskId=t.taskId,s.issuanceNumber=t.issuanceNumber,s.bachId="",this.selectedList.push(s),this.$set(t,"checked",!0)}for(var a=0;a<this.checkRecordList.length;a++){if(!this.checkRecordList[a].checked){this.selectAll=!1;break}this.selectAll=!0}},clickSelectAll:function(){if(this.selectAll){this.selectAll=!1;for(var t=0;t<this.checkRecordList.length;t++)this.selectedList=[],this.$set(this.checkRecordList[t],"checked",!1)}else{this.selectAll=!0;for(var e=0;e<this.checkRecordList.length;e++){var s={taskId:"",issuanceNumber:"",bachId:""};s.taskId=this.checkRecordList[e].taskId,s.issuanceNumber=this.checkRecordList[e].issuanceNumber,s.bachId="",this.selectedList.push(s),this.$set(this.checkRecordList[e],"checked",!0)}var a={},c=this.selectedList.reduce(function(t,e){return!a[e.taskId]&&(a[e.taskId]=t.push(e)),t},[]);this.selectedList=c}},recordRefresh:function(){this.page=1,this.getRecordList()},recordLoadMore:function(){this.checkRecordList.length<this.recordTotal?(this.page++,this.getRecordList()):this.$refs.recordScroll.update(!0)},delBtn:function(){var t=this,e=this;this.selectedList.length>0?a.a.confirm({message:"确认删除该任务信息吗?"}).then(function(){var s={taskList:t.selectedList,type:1},a=t.GLOBAL.g_paramJson(s);e.$axios.post("/task/task/delTaskOrBach",a).then(function(t){0==t.data.head.status?(e.selectAll=!1,e.selectedList=[],e.page=1,e.getRecordList(),e.$toast(t.data.head.msg)):e.$toast(t.data.head.msg)}).catch(function(t){console.log(t)})}).catch(function(){e.$toast("已取消")}):e.$toast("请先选择要删除的项")},toCheck:function(){if(localStorage.removeItem("usedTimes"),localStorage.removeItem("timesLimit"),"1"==localStorage.bsType){if(localStorage.toTestPath="checkRecord",localStorage.classTest="1",localStorage.topicCount>=10)return void this.$router.push({path:"/taskTest",query:{classTest:1,courseInfo:this.info}});this.$toast("测试题目未准备完毕，不能自测")}if("2"==localStorage.bsType)return localStorage.toTestPath="checkRecord",localStorage.goodsTest="1",void this.$router.push({path:"/taskTest",query:{ceyice:1}})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"checkRecord"}},[s("div",{staticStyle:{height:"1.2rem"}},[s("backHeader",{attrs:{title:t.dateName}},[s("span",{staticClass:"head-class f-l",attrs:{slot:"left"},on:{click:t.back},slot:"left"},[t._t("default",[s("img",{staticClass:"back-icon",attrs:{src:"static/images/dev/back@2x.png",alt:""}})])],2),t._v(" "),s("span",{staticClass:"head-class place-label",attrs:{slot:"right"},slot:"right"})])],1),t._v(" "),s("Scroll",{ref:"recordScroll",staticClass:"recordScrollCon",attrs:{"update-data":[t.checkRecordList],"refresh-data":[],probeType:3,listenScroll:!0,autoUpdate:!1,scrollX:!1,scrollY:!0},on:{pullingDown:t.recordRefresh,pullingUp:t.recordLoadMore}},[t.checkRecordList.length>0?s("div",{staticStyle:{"padding-top":"0.5px"}},[s("div",{staticClass:"checkTaskContent"},t._l(t.checkRecordList,function(e,a){return s("div",{key:a,staticClass:"lists",class:e.maxFraction==t.score?"list":"",on:{click:function(s){t.toCheckTask(e)}}},[s("div",{staticClass:"checkedSelect",on:{click:function(s){s.stopPropagation(),t.checkedSelect(e,a)}}},[e.checked?s("img",{attrs:{src:"static/images/icon/choosed.png",alt:""}}):s("img",{attrs:{src:"static/images/icon/no-choose.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listsLeft"},[s("div",{staticClass:"con_t"},[t._v(t._s(e.finshTime))])]),t._v(" "),s("div",{staticClass:"listsRight"},[s("div",{staticClass:"right_box"},[s("div",{staticClass:"ospan"},[s("span",{staticClass:"ospan"},[t._v(t._s(e.maxFraction))]),s("span",[t._v(" 分")])])]),t._v(" "),s("span",[s("img",{attrs:{src:"static/images/dev/go@2x.png"}})])])])}))]):s("div",{staticClass:"noData",staticStyle:{"padding-top":"0.5px"}},[s("noGood")],1)]),t._v(" "),s("div",{staticClass:"delBox"},[s("div",{staticClass:"selectCircle",on:{click:function(e){t.clickSelectAll()}}},[t.selectAll?s("img",{attrs:{src:"static/images/icon/choosed.png",alt:""}}):s("img",{attrs:{src:"static/images/icon/no-choose.png",alt:""}}),t._v(" "),s("span",{staticStyle:{"margin-left":"5px"}},[t._v("全选")])]),t._v(" "),s("div",{staticClass:"countBox"},[t._v("共计"+t._s(t.selectedList.length)+"/"+t._s(t.recordTotal))]),t._v(" "),s("van-button",{staticClass:"delBtn",attrs:{type:"info"},on:{click:function(e){t.delBtn()}}},[t._v("删除")]),t._v(" "),s("van-button",{staticClass:"startBtn",attrs:{type:"info"},on:{click:function(e){t.toCheck()}}},[t._v("测一测")])],1)],1)},staticRenderFns:[]};var d=s("VU/8")(l,r,!1,function(t){s("J/89")},"data-v-4e9ba7c2",null);e.default=d.exports}});